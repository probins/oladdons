var e=function(e){e('EPSG:4326','+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees'),e('EPSG:4269','+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees'),e('EPSG:3857','+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs'),e.WGS84=e['EPSG:4326'],e['EPSG:3785']=e['EPSG:3857'],e.GOOGLE=e['EPSG:3857'],e['EPSG:900913']=e['EPSG:3857'],e['EPSG:102113']=e['EPSG:3857']},t=1,s=2,n=4,o=5,r=4.84813681109536e-6,l=Math.PI/2,i=0.16666666666666666,m=0.04722222222222222,d=0.022156084656084655,_='undefined'==typeof Number.EPSILON?1e-10:Number.EPSILON,a=0.017453292519943295,c=57.29577951308232,u=Math.PI/4,p=2*Math.PI,g=3.14159265359,y={};y.greenwich=0,y.lisbon=-9.131906111111,y.paris=2.337229166667,y.bogota=-74.080916666667,y.madrid=-3.687938888889,y.rome=12.452333333333,y.bern=7.439583333333,y.jakarta=106.807719444444,y.ferro=-17.666666666667,y.brussels=4.367975,y.stockholm=18.058277777778,y.athens=23.7163375,y.oslo=10.722916666667;var x={ft:{to_meter:0.3048},"us-ft":{to_meter:1200/3937}},f=/[\s_\-\/\(\)]/g;function h(e,a){if(e[a])return e[a];for(var t,s,n=Object.keys(e),o=a.toLowerCase().replace(f,''),r=-1;++r<n.length;)if(t=n[r],s=t.toLowerCase().replace(f,''),s===o)return e[t]}var b=function(e){var t,s,n,o={},r=e.split('+').map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var a=t.split('=');return a.push(!0),e[a[0].toLowerCase()]=a[1],e},{}),l={proj:'projName',datum:'datumCode',rf:function(e){o.rf=parseFloat(e)},lat_0:function(e){o.lat0=e*a},lat_1:function(e){o.lat1=e*a},lat_2:function(e){o.lat2=e*a},lat_ts:function(e){o.lat_ts=e*a},lon_0:function(e){o.long0=e*a},lon_1:function(e){o.long1=e*a},lon_2:function(e){o.long2=e*a},alpha:function(e){o.alpha=parseFloat(e)*a},lonc:function(e){o.longc=e*a},x_0:function(e){o.x0=parseFloat(e)},y_0:function(e){o.y0=parseFloat(e)},k_0:function(e){o.k0=parseFloat(e)},k:function(e){o.k0=parseFloat(e)},a:function(e){o.a=parseFloat(e)},b:function(e){o.b=parseFloat(e)},r_a:function(){o.R_A=!0},zone:function(e){o.zone=parseInt(e,10)},south:function(){o.utmSouth=!0},towgs84:function(e){o.datum_params=e.split(',').map(function(e){return parseFloat(e)})},to_meter:function(e){o.to_meter=parseFloat(e)},units:function(e){o.units=e;var a=h(x,e);a&&(o.to_meter=a.to_meter)},from_greenwich:function(e){o.from_greenwich=e*a},pm:function(e){var t=h(y,e);o.from_greenwich=(t?t:parseFloat(e))*a},nadgrids:function(e){'@null'===e?o.datumCode='none':o.nadgrids=e},axis:function(e){var a='ewnsud';3===e.length&&-1!==a.indexOf(e.substr(0,1))&&-1!==a.indexOf(e.substr(1,1))&&-1!==a.indexOf(e.substr(2,1))&&(o.axis=e)}};for(t in r)s=r[t],t in l?(n=l[t],'function'==typeof n?n(s):o[n]=s):o[t]=s;return'string'==typeof o.datumCode&&'WGS84'!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o},C=1,E=2,S=3,N=4,P=5,w=-1,R=/\s/,k=/[A-Za-z]/,v=/[A-Za-z84]/,G=/[,\]]/,q=/[\d\.E\-\+]/;function T(e){if('string'!=typeof e)throw new Error('not a string');this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=C}T.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==N)for(;R.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case C:return this.neutral(e);case E:return this.keyword(e);case N:return this.quoted(e);case P:return this.afterquote(e);case S:return this.number(e);case w:}},T.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=N);if(G.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error('havn\'t handled "'+e+'" in afterquote yet, index '+this.place)},T.prototype.afterItem=function(e){return','===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=C)):']'===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=C,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=w))):void 0},T.prototype.number=function(e){if(q.test(e))return void(this.word+=e);if(G.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error('havn\'t handled "'+e+'" in number yet, index '+this.place)},T.prototype.quoted=function(e){return'"'===e?void(this.state=P):void(this.word+=e)},T.prototype.keyword=function(e){if(v.test(e))return void(this.word+=e);if('['===e){var a=[];return a.push(this.word),this.level++,null===this.root?this.root=a:this.currentObject.push(a),this.stack.push(this.currentObject),this.currentObject=a,void(this.state=C)}if(G.test(e))return void this.afterItem(e);throw new Error('havn\'t handled "'+e+'" in keyword yet, index '+this.place)},T.prototype.neutral=function(e){if(k.test(e))return this.word=e,void(this.state=E);if('"'===e)return this.word='',void(this.state=N);if(q.test(e))return this.word=e,void(this.state=S);if(G.test(e))return void this.afterItem(e);throw new Error('havn\'t handled "'+e+'" in neutral yet, index '+this.place)},T.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===w)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function j(e){var a=new T(e);return a.output()}function L(e,a,t){Array.isArray(a)&&(t.unshift(a),a=null);var s=a?{}:e,n=t.reduce(function(e,a){return z(a,e),e},s);a&&(e[a]=n)}function z(e,a){if(!Array.isArray(e))return void(a[e]=!0);var t=e.shift();if('PARAMETER'===t&&(t=e.shift()),1===e.length)return Array.isArray(e[0])?(a[t]={},void z(e[0],a[t])):void(a[t]=e[0]);if(!e.length)return void(a[t]=!0);if('TOWGS84'===t)return void(a[t]=e);Array.isArray(t)||(a[t]={});var s;switch(t){case'UNIT':case'PRIMEM':case'VERT_DATUM':return a[t]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&z(e[2],a[t]));case'SPHEROID':case'ELLIPSOID':return a[t]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&z(e[3],a[t]));case'PROJECTEDCRS':case'PROJCRS':case'GEOGCS':case'GEOCCS':case'PROJCS':case'LOCAL_CS':case'GEODCRS':case'GEODETICCRS':case'GEODETICDATUM':case'EDATUM':case'ENGINEERINGDATUM':case'VERT_CS':case'VERTCRS':case'VERTICALCRS':case'COMPD_CS':case'COMPOUNDCRS':case'ENGINEERINGCRS':case'ENGCRS':case'FITTED_CS':case'LOCAL_DATUM':case'DATUM':return e[0]=['name',e[0]],void L(a,t,e);default:for(s=-1;++s<e.length;)if(!Array.isArray(e[s]))return z(e,a[t]);return L(a,t,e);}}var B=0.017453292519943295;function D(e,a){var t=a[0],s=a[1];!(t in e)&&s in e&&(e[t]=e[s],3===a.length&&(e[t]=a[2](e[t])))}function M(e){return e*B}function U(e){function a(a){var t=e.to_meter||1;return a*t}'GEOGCS'===e.type?e.projName='longlat':'LOCAL_CS'===e.type?(e.projName='identity',e.local=!0):'object'==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),'metre'===e.units&&(e.units='meter'),e.UNIT.convert&&('GEOGCS'===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):(e.to_meter=e.UNIT.convert,10)));var t=e.GEOGCS;'GEOGCS'===e.type&&(t=e),t&&(e.datumCode=t.DATUM?t.DATUM.name.toLowerCase():t.name.toLowerCase(),'d_'===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),('new_zealand_geodetic_datum_1949'===e.datumCode||'new_zealand_1949'===e.datumCode)&&(e.datumCode='nzgd49'),'wgs_1984'===e.datumCode&&('Mercator_Auxiliary_Sphere'===e.PROJECTION&&(e.sphere=!0),e.datumCode='wgs84'),'_ferro'===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),'_jakarta'===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf('belge')&&(e.datumCode='rnb72'),t.DATUM&&t.DATUM.SPHEROID&&(e.ellps=t.DATUM.SPHEROID.name.replace('_19','').replace(/[Cc]larke\_18/,'clrk'),'international'===e.ellps.toLowerCase().slice(0,13)&&(e.ellps='intl'),e.a=t.DATUM.SPHEROID.a,e.rf=parseFloat(t.DATUM.SPHEROID.rf,10)),~e.datumCode.indexOf('osgb_1936')&&(e.datumCode='osgb36'),~e.datumCode.indexOf('osni_1952')&&(e.datumCode='osni52'),(~e.datumCode.indexOf('tm65')||~e.datumCode.indexOf('geodetic_datum_of_1965'))&&(e.datumCode='ire65')),e.b&&!isFinite(e.b)&&(e.b=e.a);[['standard_parallel_1','Standard_Parallel_1'],['standard_parallel_2','Standard_Parallel_2'],['false_easting','False_Easting'],['false_northing','False_Northing'],['central_meridian','Central_Meridian'],['latitude_of_origin','Latitude_Of_Origin'],['latitude_of_origin','Central_Parallel'],['scale_factor','Scale_Factor'],['k0','scale_factor'],['latitude_of_center','Latitude_of_center'],['lat0','latitude_of_center',M],['longitude_of_center','Longitude_Of_Center'],['longc','longitude_of_center',M],['x0','false_easting',a],['y0','false_northing',a],['long0','central_meridian',M],['lat0','latitude_of_origin',M],['lat0','standard_parallel_1',M],['lat1','standard_parallel_1',M],['lat2','standard_parallel_2',M],['alpha','azimuth',M],['srsCode','name']].forEach(function(t){return D(e,t)}),!e.long0&&e.longc&&('Albers_Conic_Equal_Area'===e.projName||'Lambert_Azimuthal_Equal_Area'===e.projName)&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&('Stereographic_South_Pole'===e.projName||'Polar Stereographic (variant B)'===e.projName)&&(e.lat0=M(0<e.lat1?90:-90),e.lat_ts=e.lat1)}var Q=function(e){var a=j(e),t=a.shift(),s=a.shift();a.unshift(['name',s]),a.unshift(['type',t]);var n={};return z(a,n),U(n),n};function W(e){var a=this;if(2===arguments.length){var t=arguments[1];W[e]='string'==typeof t?'+'===t.charAt(0)?b(arguments[1]):Q(arguments[1]):t}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?W.apply(a,e):W(e)});if('string'!=typeof e)'EPSG'in e?W['EPSG:'+e.EPSG]=e:'ESRI'in e?W['ESRI:'+e.ESRI]=e:'IAU2000'in e?W['IAU2000:'+e.IAU2000]=e:console.log(e);else if(e in W)return W[e]}}e(W);function F(e){return'string'==typeof e}function H(e){return e in W}var K=['PROJECTEDCRS','PROJCRS','GEOGCS','GEOCCS','PROJCS','LOCAL_CS','GEODCRS','GEODETICCRS','GEODETICDATUM','ENGCRS','ENGINEERINGCRS'];function X(e){return K.some(function(a){return-1<e.indexOf(a)})}function J(e){return'+'===e[0]}function Y(e){if(F(e)){if(H(e))return W[e];if(X(e))return Q(e);if(J(e))return b(e)}else return e}var $=function(e,a){e=e||{};var t,s;if(!a)return e;for(s in a)t=a[s],void 0!==t&&(e[s]=t);return e},ee=function(e,a,t){var s=e*a;return t/Math.sqrt(1-s*s)},ae=function(e){return 0>e?-1:1},te=function(e){return Math.abs(e)<=g?e:e-ae(e)*p},se=function(e,a,t){var s=e*t;return s=Math.pow((1-s)/(1+s),0.5*e),Math.tan(0.5*(l-a))/s},ne=function(e,a){for(var t,s,n=Math.atan,o=l-2*n(a),r=0;15>=r;r++)if(t=e*Math.sin(o),s=l-2*n(a*Math.pow((1-t)/(1+t),0.5*e))-o,o+=s,1e-10>=Math.abs(s))return o;return-9999};function oe(){var e=Math.cos,a=this.b/this.a;this.es=1-a*a,'x0'in this||(this.x0=0),'y0'in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=e(this.lat_ts):this.k0=ee(this.e,Math.sin(this.lat_ts),e(this.lat_ts)):!this.k0&&(this.k?this.k0=this.k:this.k0=1)}function re(e){var a=Math.log,t=Math.abs,s=e.x,n=e.y;if(90<n*c&&-90>n*c&&180<s*c&&-180>s*c)return null;var o,r;if(t(t(n)-l)<=_)return null;if(this.sphere)o=this.x0+this.a*this.k0*te(s-this.long0),r=this.y0+this.a*this.k0*a(Math.tan(u+0.5*n));else{var i=Math.sin(n),m=se(this.e,n,i);o=this.x0+this.a*this.k0*te(s-this.long0),r=this.y0-this.a*this.k0*a(m)}return e.x=o,e.y=r,e}function le(e){var a,t,s=Math.exp,n=e.x-this.x0,o=e.y-this.y0;if(this.sphere)t=l-2*Math.atan(s(-o/(this.a*this.k0)));else{var r=s(-o/(this.a*this.k0));if(t=ne(this.e,r),-9999===t)return null}return a=te(this.long0+n/(this.a*this.k0)),e.x=a,e.y=t,e}var ie=['Mercator','Popular Visualisation Pseudo Mercator','Mercator_1SP','Mercator_Auxiliary_Sphere','merc'],me={init:oe,forward:re,inverse:le,names:ie};function de(){}function pe(e){return e}var _e=['longlat','identity'],ce={init:de,forward:pe,inverse:pe,names:_e},ye=[me,ce],ue={},xe=[];function ge(e,a){var t=xe.length;return e.names?(xe[t]=e,e.names.forEach(function(e){ue[e.toLowerCase()]=t}),this):(console.log(a),!0)}function fe(e){if(!e)return!1;var a=e.toLowerCase();if('undefined'!=typeof ue[a]&&xe[ue[a]])return xe[ue[a]]}function he(){ye.forEach(ge)}var be={start:he,add:ge,get:fe},Ce={};Ce.MERIT={a:6378137,rf:298.257,ellipseName:'MERIT 1983'},Ce.SGS85={a:6378136,rf:298.257,ellipseName:'Soviet Geodetic System 85'},Ce.GRS80={a:6378137,rf:298.257222101,ellipseName:'GRS 1980(IUGG, 1980)'},Ce.IAU76={a:6378140,rf:298.257,ellipseName:'IAU 1976'},Ce.airy={a:6377563.396,b:6356256.91,ellipseName:'Airy 1830'},Ce.APL4={a:6378137,rf:298.25,ellipseName:'Appl. Physics. 1965'},Ce.NWL9D={a:6378145,rf:298.25,ellipseName:'Naval Weapons Lab., 1965'},Ce.mod_airy={a:6377340.189,b:6356034.446,ellipseName:'Modified Airy'},Ce.andrae={a:6377104.43,rf:300,ellipseName:'Andrae 1876 (Den., Iclnd.)'},Ce.aust_SA={a:6378160,rf:298.25,ellipseName:'Australian Natl & S. Amer. 1969'},Ce.GRS67={a:6378160,rf:298.247167427,ellipseName:'GRS 67(IUGG 1967)'},Ce.bessel={a:6377397.155,rf:299.1528128,ellipseName:'Bessel 1841'},Ce.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:'Bessel 1841 (Namibia)'},Ce.clrk66={a:6378206.4,b:6356583.8,ellipseName:'Clarke 1866'},Ce.clrk80={a:6378249.145,rf:293.4663,ellipseName:'Clarke 1880 mod.'},Ce.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:'Clarke 1858'},Ce.CPM={a:6375738.7,rf:334.29,ellipseName:'Comm. des Poids et Mesures 1799'},Ce.delmbr={a:6376428,rf:311.5,ellipseName:'Delambre 1810 (Belgium)'},Ce.engelis={a:6378136.05,rf:298.2566,ellipseName:'Engelis 1985'},Ce.evrst30={a:6377276.345,rf:300.8017,ellipseName:'Everest 1830'},Ce.evrst48={a:6377304.063,rf:300.8017,ellipseName:'Everest 1948'},Ce.evrst56={a:6377301.243,rf:300.8017,ellipseName:'Everest 1956'},Ce.evrst69={a:6377295.664,rf:300.8017,ellipseName:'Everest 1969'},Ce.evrstSS={a:6377298.556,rf:300.8017,ellipseName:'Everest (Sabah & Sarawak)'},Ce.fschr60={a:6378166,rf:298.3,ellipseName:'Fischer (Mercury Datum) 1960'},Ce.fschr60m={a:6378155,rf:298.3,ellipseName:'Fischer 1960'},Ce.fschr68={a:6378150,rf:298.3,ellipseName:'Fischer 1968'},Ce.helmert={a:6378200,rf:298.3,ellipseName:'Helmert 1906'},Ce.hough={a:6378270,rf:297,ellipseName:'Hough'},Ce.intl={a:6378388,rf:297,ellipseName:'International 1909 (Hayford)'},Ce.kaula={a:6378163,rf:298.24,ellipseName:'Kaula 1961'},Ce.lerch={a:6378139,rf:298.257,ellipseName:'Lerch 1979'},Ce.mprts={a:6397300,rf:191,ellipseName:'Maupertius 1738'},Ce.new_intl={a:6378157.5,b:6356772.2,ellipseName:'New International 1967'},Ce.plessis={a:6376523,rf:6355863,ellipseName:'Plessis 1817 (France)'},Ce.krass={a:6378245,rf:298.3,ellipseName:'Krassovsky, 1942'},Ce.SEasia={a:6378155,b:6356773.3205,ellipseName:'Southeast Asia'},Ce.walbeck={a:6376896,b:6355834.8467,ellipseName:'Walbeck'},Ce.WGS60={a:6378165,rf:298.3,ellipseName:'WGS 60'},Ce.WGS66={a:6378145,rf:298.25,ellipseName:'WGS 66'},Ce.WGS7={a:6378135,rf:298.26,ellipseName:'WGS 72'};var Ae=Ce.WGS84={a:6378137,rf:298.257223563,ellipseName:'WGS 84'};Ce.sphere={a:6370997,b:6370997,ellipseName:'Normal Sphere (r=6370997)'};function Ee(t,a,s,n){var o=t*t,r=a*a,l=(o-r)/o,p=0;n?(t*=1-l*(i+l*(m+l*d)),o=t*t,l=0):p=Math.sqrt(l);var _=(o-r)/r;return{es:l,e:p,ep2:_}}function Se(e,t,s,n,o){if(!e){var r=h(Ce,n);r||(r=Ae),e=r.a,t=r.b,s=r.rf}return s&&!t&&(t=(1-1/s)*e),(0===s||Math.abs(e-t)<_)&&(o=!0,t=e),{a:e,b:t,rf:s,sphere:o}}var Ne={wgs84:{towgs84:'0,0,0',ellipse:'WGS84',datumName:'WGS84'},ch1903:{towgs84:'674.374,15.056,405.346',ellipse:'bessel',datumName:'swiss'},ggrs87:{towgs84:'-199.87,74.79,246.62',ellipse:'GRS80',datumName:'Greek_Geodetic_Reference_System_1987'},nad83:{towgs84:'0,0,0',ellipse:'GRS80',datumName:'North_American_Datum_1983'},nad27:{nadgrids:'@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat',ellipse:'clrk66',datumName:'North_American_Datum_1927'},potsdam:{towgs84:'606.0,23.0,413.0',ellipse:'bessel',datumName:'Potsdam Rauenberg 1950 DHDN'},carthage:{towgs84:'-263.0,6.0,431.0',ellipse:'clark80',datumName:'Carthage 1934 Tunisia'},hermannskogel:{towgs84:'653.0,-212.0,449.0',ellipse:'bessel',datumName:'Hermannskogel'},osni52:{towgs84:'482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15',ellipse:'airy',datumName:'Irish National'},ire65:{towgs84:'482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15',ellipse:'mod_airy',datumName:'Ireland 1965'},rassadiran:{towgs84:'-133.63,-157.5,-158.62',ellipse:'intl',datumName:'Rassadiran'},nzgd49:{towgs84:'59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993',ellipse:'intl',datumName:'New Zealand Geodetic Datum 1949'},osgb36:{towgs84:'446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894',ellipse:'airy',datumName:'Airy 1830'},s_jtsk:{towgs84:'589,76,480',ellipse:'bessel',datumName:'S-JTSK (Ferro)'},beduaram:{towgs84:'-106,-87,188',ellipse:'clrk80',datumName:'Beduaram'},gunung_segara:{towgs84:'-403,684,41',ellipse:'bessel',datumName:'Gunung Segara Jakarta'},rnb72:{towgs84:'106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1',ellipse:'intl',datumName:'Reseau National Belge 1972'}};function Pe(e,l,i,a,m,d){var p={};return p.datum_type=void 0===e||'none'===e?o:n,l&&(p.datum_params=l.map(parseFloat),(0!==p.datum_params[0]||0!==p.datum_params[1]||0!==p.datum_params[2])&&(p.datum_type=t),3<p.datum_params.length&&(0!==p.datum_params[3]||0!==p.datum_params[4]||0!==p.datum_params[5]||0!==p.datum_params[6])&&(p.datum_type=s,p.datum_params[3]*=r,p.datum_params[4]*=r,p.datum_params[5]*=r,p.datum_params[6]=p.datum_params[6]/1e6+1)),p.a=i,p.b=a,p.es=m,p.ep2=d,p}function we(e,a){if(!(this instanceof we))return new we(e);a=a||function(e){if(e)throw e};var t=Y(e);if('object'!=typeof t)return void a(e);var s=we.projections.get(t.projName);if(!s)return void a(e);if(t.datumCode&&'none'!==t.datumCode){var n=h(Ne,t.datumCode);n&&(t.datum_params=n.towgs84?n.towgs84.split(','):null,t.ellps=n.ellipse,t.datumName=n.datumName?n.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||'enu',t.ellps=t.ellps||'wgs84';var o=Se(t.a,t.b,t.rf,t.ellps,t.sphere),r=Ee(o.a,o.b,o.rf,t.R_A),l=t.datum||Pe(t.datumCode,t.datum_params,o.a,o.b,r.es,r.ep2);$(this,t),$(this,s),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=l,this.init(),a(null,this)}we.projections=be,we.projections.start();function Oe(e,a){return!(e.datum_type!==a.datum_type)&&(e.a!==a.a||5e-11<Math.abs(e.es-a.es)?!1:e.datum_type===t?e.datum_params[0]===a.datum_params[0]&&e.datum_params[1]===a.datum_params[1]&&e.datum_params[2]===a.datum_params[2]:e.datum_type!==s||e.datum_params[0]===a.datum_params[0]&&e.datum_params[1]===a.datum_params[1]&&e.datum_params[2]===a.datum_params[2]&&e.datum_params[3]===a.datum_params[3]&&e.datum_params[4]===a.datum_params[4]&&e.datum_params[5]===a.datum_params[5]&&e.datum_params[6]===a.datum_params[6])}function Re(e,t,s){var a,n,o,r,i=Math.PI,m=Math.cos,d=Math.sin,p=e.x,_=e.y,c=e.z?e.z:0;if(_<-l&&_>-1.001*l)_=-l;else if(_>l&&_<1.001*l)_=l;else if(_<-l||_>l)return null;return p>i&&(p-=2*i),n=d(_),r=m(_),o=n*n,a=s/Math.sqrt(1-t*o),{x:(a+c)*r*m(p),y:(a+c)*r*d(p),z:(a*(1-t)+c)*n}}function ke(e,t,s,a){var n,o,r,i,m,d,p,_,c,y,u,x,g,f,h,C,A=Math.sqrt,E=1e-12,S=e.x,N=e.y,P=e.z?e.z:0;if(n=A(S*S+N*N),o=A(S*S+N*N+P*P),!(n/s<E))f=Math.atan2(N,S);else if(f=0,o/s<E)return h=l,C=-a,{x:e.x,y:e.y,z:e.z};r=P/o,i=n/o,m=1/A(1-t*(2-t)*i*i),_=i*(1-t)*m,c=r*m,g=0;do g++,p=s/A(1-t*c*c),C=n*_+P*c-p*(1-t*c*c),d=t*p/(p+C),m=1/A(1-d*(2-d)*i*i),y=i*(1-d)*m,u=r*m,x=u*_-y*c,_=y,c=u;while(x*x>E*E&&g<30);return h=Math.atan(u/Math.abs(y)),{x:f,y:h,z:C}}function Ie(e,a,n){if(a===t)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(a===s){var o=n[0],r=n[1],l=n[2],i=n[3],m=n[4],d=n[5],p=n[6];return{x:p*(e.x-d*e.y+m*e.z)+o,y:p*(d*e.x+e.y-i*e.z)+r,z:p*(-m*e.x+i*e.y+e.z)+l}}}function ve(e,a,n){if(a===t)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(a===s){var o=n[0],r=n[1],l=n[2],i=n[3],m=n[4],d=n[5],p=n[6],_=(e.x-o)/p,c=(e.y-r)/p,y=(e.z-l)/p;return{x:_+d*c-m*y,y:-d*_+c+i*y,z:m*_-i*c+y}}}function Ge(e){return e===t||e===s}var qe=function(e,a,t){return Oe(e,a)?t:e.datum_type===o||a.datum_type===o?t:e.es!==a.es||e.a!==a.a||Ge(e.datum_type)||Ge(a.datum_type)?(t=Re(t,e.es,e.a),Ge(e.datum_type)&&(t=Ie(t,e.datum_type,e.datum_params)),Ge(a.datum_type)&&(t=ve(t,a.datum_type,a.datum_params)),ke(t,a.es,a.a,a.b)):t},Te=function(e,a,s){var n,o,t,r=s.x,l=s.y,i=s.z||0,m={};for(t=0;3>t;t++)if(!(a&&2===t&&void 0===s.z))switch(0===t?(n=r,o='x'):1===t?(n=l,o='y'):(n=i,o='z'),e.axis[t]){case'e':m[o]=n;break;case'w':m[o]=-n;break;case'n':m[o]=n;break;case's':m[o]=-n;break;case'u':void 0!==s[o]&&(m.z=n);break;case'd':void 0!==s[o]&&(m.z=-n);break;default:return null;}return m},je=function(e){var a={x:e[0],y:e[1]};return 2<e.length&&(a.z=e[2]),3<e.length&&(a.m=e[3]),a},Le=function(e){ze(e.x),ze(e.y)};function ze(e){var a=Number.isFinite;if('function'==typeof a){if(a(e))return;throw new TypeError('coordinates must be finite numbers')}if('number'!=typeof e||e!==e||!isFinite(e))throw new TypeError('coordinates must be finite numbers')}function Be(e,a){return(e.datum.datum_type===t||e.datum.datum_type===s)&&'WGS84'!==a.datumCode||(a.datum.datum_type===t||a.datum.datum_type===s)&&'WGS84'!==e.datumCode}function De(e,t,s){var n;return Array.isArray(s)&&(s=je(s)),Le(s),e.datum&&t.datum&&Be(e,t)&&(n=new we('WGS84'),s=De(e,n,s),e=n),'enu'!==e.axis&&(s=Te(e,!1,s)),'longlat'===e.projName?s={x:s.x*a,y:s.y*a}:(e.to_meter&&(s={x:s.x*e.to_meter,y:s.y*e.to_meter}),s=e.inverse(s)),e.from_greenwich&&(s.x+=e.from_greenwich),s=qe(e.datum,t.datum,s),t.from_greenwich&&(s={x:s.x-t.from_greenwich,y:s.y}),'longlat'===t.projName?s={x:s.x*c,y:s.y*c}:(s=t.forward(s),t.to_meter&&(s={x:s.x/t.to_meter,y:s.y/t.to_meter})),'enu'===t.axis?s:Te(t,!0,s)}var Me=we('WGS84');function Ue(e,a,t){var s,n,o;return Array.isArray(t)?(s=De(e,a,t),3===t.length?[s.x,s.y,s.z]:[s.x,s.y]):(n=De(e,a,t),o=Object.keys(t),2===o.length)?n:(o.forEach(function(e){'x'===e||'y'===e||(n[e]=t[e])}),n)}function Qe(e){return e instanceof we?e:e.oProj?e.oProj:we(e)}function We(e,a,t){e=Qe(e);var s,n=!1;return'undefined'==typeof a?(a=e,e=Me,n=!0):('undefined'!=typeof a.x||Array.isArray(a))&&(t=a,a=e,e=Me,n=!0),a=Qe(a),t?Ue(e,a,t):(s={forward:function(t){return Ue(e,a,t)},inverse:function(t){return Ue(a,e,t)}},n&&(s.oProj=a),s)}var Fe=6,He='AJSAJS',Ke='AFAFAF',Xe=65,A=73,I=79,O=86,V=90,Z={forward:Je,inverse:Ve,toPoint:Ze};function Je(e,a){return a=a||5,sa(ea({lat:e[1],lon:e[0]}),a)}function Ve(e){var a=aa(la(e.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat,a.lon,a.lat]:[a.left,a.bottom,a.right,a.top]}function Ze(e){var a=aa(la(e.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat]:[(a.left+a.right)/2,(a.top+a.bottom)/2]}function Ye(e){return e*(Math.PI/180)}function $e(e){return 180*(e/Math.PI)}function ea(e){var t,s,n,o,r,l,i,m,d,p=Math.round,_=Math.cos,c=Math.sin,y=Math.tan,u=e.lat,x=e.lon,g=6378137,a=0.00669438,f=0.9996,h=Ye(u),b=Ye(x);d=Math.floor((x+180)/6)+1,180===x&&(d=60),56<=u&&64>u&&3<=x&&12>x&&(d=32),72<=u&&84>u&&(0<=x&&9>x?d=31:9<=x&&21>x?d=33:21<=x&&33>x?d=35:33<=x&&42>x&&(d=37)),t=6*(d-1)-180+3,m=Ye(t),s=a/(1-a),n=g/Math.sqrt(1-a*c(h)*c(h)),o=y(h)*y(h),r=s*_(h)*_(h),l=_(h)*(b-m),i=g*((1-a/4-3*a*a/64-5*a*a*a/256)*h-(3*a/8+3*a*a/32+45*a*a*a/1024)*c(2*h)+(15*a*a/256+45*a*a*a/1024)*c(4*h)-35*a*a*a/3072*c(6*h));var C=f*n*(l+(1-o+r)*l*l*l/6+(5-18*o+o*o+72*r-58*s)*l*l*l*l*l/120)+5e5,A=f*(i+n*y(h)*(l*l/2+(5-o+9*r+4*r*r)*l*l*l*l/24+(61-58*o+o*o+600*r-330*s)*l*l*l*l*l*l/720));return 0>u&&(A+=1e7),{northing:p(A),easting:p(C),zoneNumber:d,zoneLetter:ta(u)}}function aa(e){var t=Math.cos,s=Math.sin,n=Math.tan,o=e.northing,r=e.easting,l=e.zoneLetter,i=e.zoneNumber;if(0>i||60<i)return null;var m,d,p,_,c,u,x,g,f,h,b=0.9996,C=6378137,a=0.00669438,A=(1-0.9966471893303066)/(1+0.9966471893303066),E=o;'N'>l&&(E-=1e7),g=6*(i-1)-180+3,m=a/(1-a),x=E/b,f=x/(C*(1-a/4-3*a*a/64-5*a*a*a/256)),h=f+(3*A/2-27*A*A*A/32)*s(2*f)+(21*A*A/16-55*A*A*A*A/32)*s(4*f)+151*A*A*A/96*s(6*f),d=C/Math.sqrt(1-a*s(h)*s(h)),p=n(h)*n(h),_=m*t(h)*t(h),c=C*(1-a)/Math.pow(1-a*s(h)*s(h),1.5),u=(r-5e5)/(d*b);var y=h-d*n(h)/c*(u*u/2-(5+3*p+10*_-4*_*_-9*m)*u*u*u*u/24+(61+90*p+298*_+45*p*p-252*m-3*_*_)*u*u*u*u*u*u/720);y=$e(y);var S=(u-(1+2*p+_)*u*u*u/6+(5-2*_+28*p-3*_*_+8*m+24*p*p)*u*u*u*u*u/120)/t(h);S=g+$e(S);var N;if(e.accuracy){var P=aa({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});N={top:P.lat,right:P.lon,bottom:y,left:S}}else N={lat:y,lon:S};return N}function ta(e){var a='Z';return 84>=e&&72<=e?a='X':72>e&&64<=e?a='W':64>e&&56<=e?a='V':56>e&&48<=e?a='U':48>e&&40<=e?a='T':40>e&&32<=e?a='S':32>e&&24<=e?a='R':24>e&&16<=e?a='Q':16>e&&8<=e?a='P':8>e&&0<=e?a='N':0>e&&-8<=e?a='M':-8>e&&-16<=e?a='L':-16>e&&-24<=e?a='K':-24>e&&-32<=e?a='J':-32>e&&-40<=e?a='H':-40>e&&-48<=e?a='G':-48>e&&-56<=e?a='F':-56>e&&-64<=e?a='E':-64>e&&-72<=e?a='D':-72>e&&-80<=e&&(a='C'),a}function sa(e,a){var t='00000'+e.easting,s='00000'+e.northing;return e.zoneNumber+e.zoneLetter+na(e.easting,e.northing,e.zoneNumber)+t.substr(t.length-5,a)+s.substr(s.length-5,a)}function na(e,a,t){var s=Math.floor,n=oa(t),o=s(e/1e5),r=s(a/1e5)%20;return ra(o,r,n)}function oa(e){var a=e%Fe;return 0==a&&(a=Fe),a}function ra(e,a,t){var s=String.fromCharCode,n=t-1,o=He.charCodeAt(n),r=Ke.charCodeAt(n),l=o+e-1,i=r+a,m=!1;l>V&&(l=l-V+Xe-1,m=!0),(l==A||o<A&&l>A||(l>A||o<A)&&m)&&l++,(l==I||o<I&&l>I||(l>I||o<I)&&m)&&(l++,l==A&&l++),l>V&&(l=l-V+Xe-1),i>O?(i=i-O+Xe-1,m=!0):m=!1,(i===A||r<A&&i>A||(i>A||r<A)&&m)&&i++,(i===I||r<I&&i>I||(i>I||r<I)&&m)&&(i++,i===A&&i++),i>O&&(i=i-O+Xe-1);var d=s(l)+s(i);return d}function la(e){if(e&&0===e.length)throw'MGRSPoint coverting from nothing';for(var a,t=e.length,s=null,n='',o=0;!/[A-Z]/.test(a=e.charAt(o));){if(2<=o)throw'MGRSPoint bad conversion from: '+e;n+=a,o++}var r=parseInt(n,10);if(0==o||o+3>t)throw'MGRSPoint bad conversion from: '+e;var l=e.charAt(o++);if('A'>=l||'B'===l||'Y'===l||'Z'<=l||'I'===l||'O'===l)throw'MGRSPoint zone letter '+l+' not handled: '+e;s=e.substring(o,o+=2);for(var i=oa(r),m=ia(s.charAt(0),i),d=ma(s.charAt(1),i);d<da(l);)d+=2e6;var p=t-o;if(0!=p%2)throw'MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters'+e;var _,c,y,u,x,g=p/2,f=0,h=0;return 0<g&&(_=1e5/Math.pow(10,g),c=e.substring(o,o+g),f=parseFloat(c)*_,y=e.substring(o+g),h=parseFloat(y)*_),u=f+m,x=h+d,{easting:u,northing:x,zoneLetter:l,zoneNumber:r,accuracy:_}}function ia(a,e){for(var t=He.charCodeAt(e-1),s=1e5,n=!1;t!==a.charCodeAt(0);){if(t++,t===A&&t++,t===I&&t++,t>V){if(n)throw'Bad character: '+a;t=Xe,n=!0}s+=1e5}return s}function ma(e,a){if('V'<e)throw'MGRSPoint given invalid Northing '+e;for(var t=Ke.charCodeAt(a-1),s=0,n=!1;t!==e.charCodeAt(0);){if(t++,t===A&&t++,t===I&&t++,t>O){if(n)throw'Bad character: '+e;t=Xe,n=!0}s+=1e5}return s}function da(e){var a;if(a='C'===e?1.1e6:'D'===e?2e6:'E'===e?2.8e6:'F'===e?3.7e6:'G'===e?4.6e6:'H'===e?5.5e6:'J'===e?6.4e6:'K'===e?7.3e6:'L'===e?8.2e6:'M'===e?9.1e6:'N'===e?0:'P'===e?8e5:'Q'===e?1.7e6:'R'===e?2.6e6:'S'===e?3.5e6:'T'===e?4.4e6:'U'===e?5.3e6:'V'===e?6.2e6:'W'===e?7e6:'X'===e?7.9e6:-1,0<=a)return a;throw'Invalid zone letter: '+e}function pa(e,a,t){if(!(this instanceof pa))return new pa(e,a,t);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if('object'==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if('string'==typeof e&&'undefined'==typeof a){var s=e.split(',');this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=e,this.y=a,this.z=t||0;console.warn('proj4.Point will be removed in version 3, use proj4.toPoint')}pa.fromMGRS=function(e){return new pa(Ze(e))},pa.prototype.toMGRS=function(e){return Je([this.x,this.y],e)};var _a='2.4.4-alpha',ca=1,ya=0.25,ua=0.046875,xa=0.01953125,ga=0.01068115234375,fa=0.75,ha=0.46875,ba=0.013020833333333334,Ca=0.007120768229166667,Aa=0.3645833333333333,Ea=0.005696614583333333,Sa=0.3076171875,Na=function(e){var a=[];a[0]=ca-e*(ya+e*(ua+e*(xa+e*ga))),a[1]=e*(fa-e*(ua+e*(xa+e*ga)));var s=e*e;return a[2]=s*(ha-e*(ba+e*Ca)),s*=e,a[3]=s*(Aa-e*Ea),a[4]=s*e*Sa,a},Pa=function(e,a,t,s){return t*=a,a*=a,s[0]*e-t*(s[1]+a*(s[2]+a*(s[3]+a*s[4])))},wa=20,Oa=function(e,a,n){for(var o=e,r=wa;r;--r){var l=Math.sin(o),s=1-a*l*l;if(s=(Pa(o,l,Math.cos(o),n)-e)*(s*Math.sqrt(s))*(1/(1-a)),o-=s,Math.abs(s)<_)return o}return o};function Ra(){this.x0=this.x0===void 0?0:this.x0,this.y0=this.y0===void 0?0:this.y0,this.long0=this.long0===void 0?0:this.long0,this.lat0=this.lat0===void 0?0:this.lat0,this.es&&(this.en=Na(this.es),this.ml0=Pa(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function ka(e){var a,s,n,o=Math.cos,r=Math.sin,l=Math.pow,i=Math.abs,m=Math.sqrt,d=e.x,p=e.y,u=te(d-this.long0),x=r(p),g=o(p);if(!this.es){var f=g*r(u);if(i(i(f)-1)<_)return 93;if(s=0.5*this.a*this.k0*Math.log((1+f)/(1-f))+this.x0,n=g*o(u)/m(1-l(f,2)),f=i(n),1<=f){if(f-1>_)return 93;n=0}else n=Math.acos(n);0>p&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}else{var h=g*u,b=l(h,2),C=this.ep2*l(g,2),c=l(C,2),A=i(g)>_?Math.tan(p):0,E=l(A,2),t=l(E,2);a=1-this.es*l(x,2),h/=m(a);var S=Pa(p,x,g,this.en);s=this.a*(this.k0*h*(1+b/6*(1-E+C+b/20*(5-18*E+t+14*C-58*E*C+b/42*(61+179*t-t*E-479*E)))))+this.x0,n=this.a*(this.k0*(S-this.ml0+x*u*h/2*(1+b/12*(5-E+9*C+4*c+b/30*(61+t-58*E+270*C-330*E*C+b/56*(1385+543*t-t*E-3111*E))))))+this.y0}return e.x=s,e.y=n,e}function Ia(e){var a,s,n,o,r=Math.cos,i=Math.pow,m=Math.abs,p=Math.sqrt,u=(e.x-this.x0)*(1/this.a),x=(e.y-this.y0)*(1/this.a);if(!this.es){var y=Math.exp(u/this.k0),f=0.5*(y-1/y),g=this.lat0+x/this.k0,b=r(g);a=p((1-i(b,2))/(1+i(f,2))),n=Math.asin(a),0>x&&(n=-n),o=0==f&&0===b?0:te(Math.atan2(f,b)+this.long0)}else if(a=this.ml0+x/this.k0,s=Oa(a,this.es,this.en),m(s)<l){var h=Math.sin(s),C=r(s),A=m(C)>_?Math.tan(s):0,E=this.ep2*i(C,2),c=i(E,2),S=i(A,2),t=i(S,2);a=1-this.es*i(h,2);var N=u*p(a)/this.k0,d=i(N,2);a*=A,n=s-0.5*(a*d/(1-this.es))*(1-d/12*(5+3*S-9*E*S+E-4*c-d/30*(61+90*S-252*E*S+45*t+46*E-d/56*(1385+3633*S+4095*t+1574*t*S)))),o=te(this.long0+N*(1-d/6*(1+2*S+E-d/20*(5+28*S+24*t+8*E*S+6*E-d/42*(61+662*S+1320*t+720*t*S))))/C)}else n=l*ae(x),o=0;return e.x=o,e.y=n,e}var va=['Transverse_Mercator','Transverse Mercator','tmerc'],Ga={init:Ra,forward:ka,inverse:Ia,names:va},qa=function(e){var a=Math.exp(e);return a=(a-1/a)/2,a},Ta=function(e,t){var s=Math.abs;e=s(e),t=s(t);var n=Math.max(e,t),a=Math.min(e,t)/(n?n:1);return n*Math.sqrt(1+Math.pow(a,2))},ja=function(e){var a=1+e,t=a-1;return 0==t?e:e*Math.log(a)/t},La=function(e){var a=Math.abs(e);return a=ja(a*(1+a/(Ta(1,a)+1))),0>e?-a:a},za=function(e,a){for(var t,s=2*Math.cos(2*a),n=e.length-1,o=e[n],r=0;0<=--n;)t=-r+s*o+e[n],r=o,o=t;return a+t*Math.sin(2*a)},Ba=function(e,a){for(var t,s=2*Math.cos(a),n=e.length-1,o=e[n],r=0;0<=--n;)t=-r+s*o+e[n],r=o,o=t;return Math.sin(a)*t},Da=function(e){var a=Math.exp(e);return a=(a+1/a)/2,a},Ma=function(e,a,t){for(var s,n,o=Math.sin(a),l=Math.cos(a),m=qa(t),d=Da(t),p=2*l*d,r=-2*o*m,i=e.length-1,_=e[i],c=0,y=0,u=0;0<=--i;)s=y,n=c,y=_,c=u,_=-s+p*y-r*c+e[i],u=-n+r*y+p*c;return p=o*d,r=l*m,[p*_-r*u,p*u+r*_]};function Ua(){if(this.es===void 0||0>=this.es)throw new Error('incorrect elliptical usage');this.x0=this.x0===void 0?0:this.x0,this.y0=this.y0===void 0?0:this.y0,this.long0=this.long0===void 0?0:this.long0,this.lat0=this.lat0===void 0?0:this.lat0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),a=e/(2-e),t=a;this.cgb[0]=a*(2+a*(-2/3+a*(-2+a*(116/45+a*(26/45+a*(-2854/675)))))),this.cbg[0]=a*(-2+a*(2/3+a*(4/3+a*(-82/45+a*(32/45+a*(4642/4725)))))),t*=a,this.cgb[1]=t*(7/3+a*(-8/5+a*(-227/45+a*(2704/315+a*(2323/945))))),this.cbg[1]=t*(5/3+a*(-16/15+a*(-13/9+a*(904/315+a*(-1522/945))))),t*=a,this.cgb[2]=t*(56/15+a*(-136/35+a*(-1262/105+a*(73814/2835)))),this.cbg[2]=t*(-26/15+a*(34/21+a*(8/5+a*(-12686/2835)))),t*=a,this.cgb[3]=t*(4279/630+a*(-332/35+a*(-399572/14175))),this.cbg[3]=t*(1237/630+a*(-12/5+a*(-24832/14175))),t*=a,this.cgb[4]=t*(4174/315+a*(-144838/6237)),this.cbg[4]=t*(-734/315+a*(109598/31185)),t*=a,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(a,2),this.Qn=this.k0/(1+a)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=a*(-0.5+a*(2/3+a*(-37/96+a*(1/360+a*(81/512+a*(-96199/604800)))))),this.gtu[0]=a*(0.5+a*(-2/3+a*(5/16+a*(41/180+a*(-127/288+a*(7891/37800)))))),this.utg[1]=t*(-1/48+a*(-1/15+a*(437/1440+a*(-46/105+a*(1118711/3870720))))),this.gtu[1]=t*(13/48+a*(-3/5+a*(557/1440+a*(281/630+a*(-1983433/1935360))))),t*=a,this.utg[2]=t*(-17/480+a*(37/840+a*(209/4480+a*(-5569/90720)))),this.gtu[2]=t*(61/240+a*(-103/140+a*(15061/26880+a*(167603/181440)))),t*=a,this.utg[3]=t*(-4397/161280+a*(11/504+a*(830251/7257600))),this.gtu[3]=t*(49561/161280+a*(-179/168+a*(6601661/7257600))),t*=a,this.utg[4]=t*(-4583/161280+a*(108847/3991680)),this.gtu[4]=t*(34729/80640+a*(-3418889/1995840)),t*=a,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var s=za(this.cbg,this.lat0);this.Zb=-this.Qn*(s+Ba(this.gtu,2*s))}function Qa(e){var a=Math.atan2,t=Math.cos,s=Math.sin,n=te(e.x-this.long0),o=e.y;o=za(this.cbg,o);var r=s(o),l=t(o),i=s(n),m=t(n);o=a(r,m*l),n=a(i*l,Ta(r,l*m)),n=La(Math.tan(n));var d=Ma(this.gtu,2*o,2*n);o+=d[0],n+=d[1];var p,_;return 2.623395162778>=Math.abs(n)?(p=this.a*(this.Qn*n)+this.x0,_=this.a*(this.Qn*o+this.Zb)+this.y0):(p=Infinity,_=Infinity),e.x=p,e.y=_,e}function Wa(e){var a=Math.atan2,t=Math.cos,s=Math.sin,n=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);o=(o-this.Zb)/this.Qn,n/=this.Qn;var r,l;if(2.623395162778>=Math.abs(n)){var i=Ma(this.utg,2*o,2*n);o+=i[0],n+=i[1],n=Math.atan(qa(n));var m=s(o),d=t(o),p=s(n),_=t(n);o=a(m*_,Ta(p,_*d)),n=a(p,_*d),r=te(n+this.long0),l=za(this.cgb,o)}else r=Infinity,l=Infinity;return e.x=r,e.y=l,e}var Fa=['Extended_Transverse_Mercator','Extended Transverse Mercator','etmerc'],Ha={init:Ua,forward:Qa,inverse:Wa,names:Fa},Ka=function(e,a){var t=Math.PI;if(void 0===e){if(e=Math.floor(30*(te(a)+t)/t)+1,0>e)return 0;if(60<e)return 60}return e},Xa='etmerc';function Ja(){var e=Ka(this.zone,this.long0);if(e===void 0)throw new Error('unknown utm zone');this.lat0=0,this.long0=(6*Math.abs(e)-183)*a,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=0.9996,Ha.init.apply(this),this.forward=Ha.forward,this.inverse=Ha.inverse}var Va=['Universal Transverse Mercator System','utm'],Za={init:Ja,names:Va,dependsOn:Xa},Ya=function(e,a){return Math.pow((1-e)/(1+e),a)},$a=20;function et(){var e=Math.tan,a=Math.sqrt,t=Math.sin(this.lat0),s=Math.cos(this.lat0);s*=s,this.rc=a(1-this.es)/(1-this.es*t*t),this.C=a(1+this.es*s*s/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=0.5*this.C*this.e,this.K=e(0.5*this.phic0+u)/(Math.pow(e(0.5*this.lat0+u),this.C)*Ya(this.e*t,this.ratexp))}function at(e){var a=e.x,t=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(0.5*t+u),this.C)*Ya(this.e*Math.sin(t),this.ratexp))-l,e.x=this.C*a,e}function tt(e){for(var a=e.x/this.C,t=e.y,s=Math.pow(Math.tan(0.5*t+u)/this.K,1/this.C),n=$a;0<n&&(t=2*Math.atan(s*Ya(this.e*Math.sin(e.y),-0.5*this.e))-l,!(Math.abs(t-e.y)<1e-14));--n)e.y=t;return n?(e.x=a,e.y=t,e):null}var st=['gauss'],nt={init:et,forward:at,inverse:tt,names:st};function ot(){nt.init.apply(this);this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,!this.title&&(this.title='Oblique Stereographic Alternative'))}function rt(e){var a,t,s,n,o=Math.cos,r=Math.sin;return e.x=te(e.x-this.long0),nt.forward.apply(this,[e]),a=r(e.y),t=o(e.y),s=o(e.x),n=this.k0*this.R2/(1+this.sinc0*a+this.cosc0*t*s),e.x=n*t*r(e.x),e.y=n*(this.cosc0*a-this.sinc0*t*s),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function lt(e){var a,t,s,n,o,r=Math.atan2;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=Math.sqrt(e.x*e.x+e.y*e.y)){var l=2*r(o,this.R2);a=Math.sin(l),t=Math.cos(l),n=Math.asin(t*this.sinc0+e.y*a*this.cosc0/o),s=r(e.x*a,o*this.cosc0*t-e.y*this.sinc0*a)}else n=this.phic0,s=0;return e.x=s,e.y=n,nt.inverse.apply(this,[e]),e.x=te(e.x+this.long0),e}var it=['Stereographic_North_Pole','Oblique_Stereographic','Polar_Stereographic','sterea','Oblique Stereographic Alternative'],mt={init:ot,forward:rt,inverse:lt,names:it};function dt(e,a,t){return a*=t,Math.tan(0.5*(l+e))*Math.pow((1-a)/(1+a),0.5*t)}function pt(){var e=Math.cos,a=Math.sin,t=Math.pow,s=Math.abs;this.coslat0=e(this.lat0),this.sinlat0=a(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&s(this.coslat0)<=_&&(this.k0=0.5*(1+ae(this.lat0)*a(this.lat_ts))):(s(this.coslat0)<=_&&(0<this.lat0?this.con=1:this.con=-1),this.cons=Math.sqrt(t(1+this.e,1+this.e)*t(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&s(this.coslat0)<=_&&(this.k0=0.5*this.cons*ee(this.e,a(this.lat_ts),e(this.lat_ts))/se(this.e,this.con*this.lat_ts,this.con*a(this.lat_ts))),this.ms1=ee(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-l,this.cosX0=e(this.X0),this.sinX0=a(this.X0))}function _t(e){var a,t,s,n,o,r,i=Math.cos,m=Math.sin,d=Math.abs,p=e.x,c=e.y,y=m(c),u=i(c),x=te(p-this.long0);return d(d(p-this.long0)-Math.PI)<=_&&d(c+this.lat0)<=_?(e.x=NaN,e.y=NaN,e):this.sphere?(a=2*this.k0/(1+this.sinlat0*y+this.coslat0*u*i(x)),e.x=this.a*a*u*m(x)+this.x0,e.y=this.a*a*(this.coslat0*y-this.sinlat0*u*i(x))+this.y0,e):(t=2*Math.atan(this.ssfn_(c,y,this.e))-l,n=i(t),s=m(t),d(this.coslat0)<=_)?(o=se(this.e,c*this.con,this.con*y),r=2*this.a*this.k0*o/this.cons,e.x=this.x0+r*m(p-this.long0),e.y=this.y0-this.con*r*i(p-this.long0),e):(d(this.sinlat0)<_?(a=2*this.a*this.k0/(1+n*i(x)),e.y=a*s):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*n*i(x))),e.y=a*(this.cosX0*s-this.sinX0*n*i(x))+this.y0),e.x=a*n*m(x)+this.x0,e)}function ct(e){var a=Math.asin,t=Math.atan2,s=Math.cos,n=Math.sin,o=Math.atan,r=Math.abs;e.x-=this.x0,e.y-=this.y0;var i,m,d,p,y,u=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var x=2*o(u/(0.5*this.a*this.k0));return(i=this.long0,m=this.lat0,u<=_)?(e.x=i,e.y=m,e):(m=a(s(x)*this.sinlat0+e.y*n(x)*this.coslat0/u),i=r(this.coslat0)<_?0<this.lat0?te(this.long0+t(e.x,-1*e.y)):te(this.long0+t(e.x,e.y)):te(this.long0+t(e.x*n(x),u*this.coslat0*s(x)-e.y*this.sinlat0*n(x))),e.x=i,e.y=m,e)}if(r(this.coslat0)<=_){if(u<=_)return m=this.lat0,i=this.long0,e.x=i,e.y=m,e;e.x*=this.con,e.y*=this.con,d=u*this.cons/(2*this.a*this.k0),m=this.con*ne(this.e,d),i=this.con*te(this.con*this.long0+t(e.x,-1*e.y))}else p=2*o(u*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this.long0,u<=_?y=this.X0:(y=a(s(p)*this.sinX0+e.y*n(p)*this.cosX0/u),i=te(this.long0+t(e.x*n(p),u*this.cosX0*s(p)-e.y*this.sinX0*n(p)))),m=-1*ne(this.e,Math.tan(0.5*(l+y)));return e.x=i,e.y=m,e}var yt=['stere','Stereographic_South_Pole','Polar Stereographic (variant B)'],ut={init:pt,forward:_t,inverse:ct,names:yt,ssfn_:dt};function xt(){var a=Math.PI,t=Math.log,s=Math.tan,n=Math.pow,o=Math.sqrt,r=this.lat0;this.lambda0=this.long0;var l=Math.sin(r),i=this.a,m=this.rf,d=1/m,p=2*d-n(d,2),_=this.e=o(p);this.R=this.k0*i*o(1-p)/(1-p*n(l,2)),this.alpha=o(1+p/(1-p)*n(Math.cos(r),4)),this.b0=Math.asin(l/this.alpha);var e=t(s(a/4+this.b0/2)),c=t(s(a/4+r/2)),y=t((1+_*l)/(1-_*l));this.K=e-this.alpha*c+this.alpha*_/2*y}function gt(e){var a=Math.PI,t=Math.log,s=Math.cos,n=Math.sin,o=Math.atan,r=Math.tan,l=t(r(a/4-e.y/2)),i=this.e/2*t((1+this.e*n(e.y))/(1-this.e*n(e.y))),m=-this.alpha*(l+i)+this.K,d=2*(o(Math.exp(m))-a/4),p=this.alpha*(e.x-this.lambda0),_=o(n(p)/(n(this.b0)*r(d)+s(this.b0)*s(p))),c=Math.asin(s(this.b0)*n(d)-n(this.b0)*s(d)*s(p));return e.y=this.R/2*t((1+n(c))/(1-n(c)))+this.y0,e.x=this.R*_+this.x0,e}function ft(e){for(var a=Math.asin,t=Math.PI,s=Math.exp,n=Math.log,o=Math.cos,r=Math.sin,l=Math.atan,i=Math.tan,m=e.x-this.x0,d=e.y-this.y0,p=m/this.R,_=2*(l(s(d/this.R))-t/4),c=a(o(this.b0)*r(_)+r(this.b0)*o(_)*o(p)),y=l(r(p)/(o(this.b0)*o(p)-r(this.b0)*i(_))),u=this.lambda0+y/this.alpha,x=0,g=c,f=-1e3,h=0;1e-7<Math.abs(g-f);){if(20<++h)return;x=1/this.alpha*(n(i(t/4+c/2))-this.K)+this.e*n(i(t/4+a(this.e*r(g))/2)),f=g,g=2*l(s(x))-t/2}return e.x=u,e.y=g,e}var ht=['somerc'],bt={init:xt,forward:gt,inverse:ft,names:ht};function Ct(){var e=Math.asin,a=Math.atan2,t=Math.cos,s=Math.sin,n=Math.atan,o=Math.tan,r=Math.pow,l=Math.sqrt;this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var i=s(this.lat0),m=t(this.lat0),d=this.e*i;this.bl=l(1+this.es/(1-this.es)*r(m,4)),this.al=this.a*this.bl*this.k0*l(1-this.es)/(1-d*d);var p=se(this.e,this.lat0,i),_=this.bl/m*l((1-this.es)/(1-d*d));1>_*_&&(_=1);var c,y;if(!isNaN(this.longc))c=0<=this.lat0?_+l(_*_-1):_-l(_*_-1),this.el=c*r(p,this.bl),y=0.5*(c-1/c),this.gamma0=e(s(this.alpha)/_),this.long0=this.longc-e(y*o(this.gamma0))/this.bl;else{var u=se(this.e,this.lat1,s(this.lat1)),x=se(this.e,this.lat2,s(this.lat2));this.el=0<=this.lat0?(_+l(_*_-1))*r(p,this.bl):(_-l(_*_-1))*r(p,this.bl);var g=r(u,this.bl),f=r(x,this.bl);c=this.el/g,y=0.5*(c-1/c);var h=(this.el*this.el-f*g)/(this.el*this.el+f*g),b=te(this.long1-this.long2);this.long0=0.5*(this.long1+this.long2)-n(h*o(0.5*this.bl*b)/((f-g)/(f+g)))/this.bl,this.long0=te(this.long0);var C=te(this.long1-this.long0);this.gamma0=n(s(this.bl*C)/y),this.alpha=e(_*s(this.gamma0))}this.uc=this.no_off?0:0<=this.lat0?this.al/this.bl*a(l(_*_-1),t(this.alpha)):-1*this.al/this.bl*a(l(_*_-1),t(this.alpha))}function At(e){var a,s,n,o=Math.log,r=Math.cos,i=Math.sin,m=Math.abs,d=e.x,p=e.y,c=te(d-this.long0);if(m(m(p)-l)<=_)n=0<p?-1:1,s=this.al/this.bl*o(Math.tan(u+0.5*(n*this.gamma0))),a=-1*n*l*this.al/this.bl;else{var y=se(this.e,p,i(p)),t=this.el/Math.pow(y,this.bl),x=0.5*(t-1/t),g=i(this.bl*c),f=(x*i(this.gamma0)-g*r(this.gamma0))/(0.5*(t+1/t));s=m(m(f)-1)<=_?Number.POSITIVE_INFINITY:0.5*this.al*o((1-f)/(1+f))/this.bl,a=m(r(this.bl*c))<=_?this.al*this.bl*c:this.al*Math.atan2(x*r(this.gamma0)+g*i(this.gamma0),r(this.bl*c))/this.bl}return this.no_rot?(e.x=this.x0+a,e.y=this.y0+s):(a-=this.uc,e.x=this.x0+s*r(this.alpha)+a*i(this.alpha),e.y=this.y0+a*r(this.alpha)-s*i(this.alpha)),e}function Et(e){var a,t,s=Math.cos,n=Math.sin,o=Math.abs;this.no_rot?(t=e.y-this.y0,a=e.x-this.x0):(t=(e.x-this.x0)*s(this.alpha)-(e.y-this.y0)*n(this.alpha),a=(e.y-this.y0)*s(this.alpha)+(e.x-this.x0)*n(this.alpha),a+=this.uc);var r=Math.exp(-1*this.bl*t/this.al),i=0.5*(r-1/r),m=n(this.bl*a/this.al),d=(m*s(this.gamma0)+i*n(this.gamma0))/(0.5*(r+1/r)),p=Math.pow(this.el/Math.sqrt((1+d)/(1-d)),1/this.bl);return o(d-1)<_?(e.x=this.long0,e.y=l):o(d+1)<_?(e.x=this.long0,e.y=-1*l):(e.y=ne(this.e,p),e.x=te(this.long0-Math.atan2(i*s(this.gamma0)-m*n(this.gamma0),s(this.bl*a/this.al))/this.bl)),e}var St=['Hotine_Oblique_Mercator','Hotine Oblique Mercator','Hotine_Oblique_Mercator_Azimuth_Natural_Origin','Hotine_Oblique_Mercator_Azimuth_Center','omerc'],Nt={init:Ct,forward:At,inverse:Et,names:St};function Pt(){var e=Math.log,a=Math.cos,t=Math.sin,s=Math.pow,n=Math.abs;if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(n(this.lat1+this.lat2)<_)){var o=this.b/this.a;this.e=Math.sqrt(1-o*o);var r=t(this.lat1),l=a(this.lat1),i=ee(this.e,r,l),m=se(this.e,this.lat1,r),d=t(this.lat2),p=a(this.lat2),c=ee(this.e,d,p),y=se(this.e,this.lat2,d),u=se(this.e,this.lat0,t(this.lat0));this.ns=n(this.lat1-this.lat2)>_?e(i/c)/e(m/y):r,isNaN(this.ns)&&(this.ns=r),this.f0=i/(this.ns*s(m,this.ns)),this.rh=this.a*this.f0*s(u,this.ns),this.title||(this.title='Lambert Conformal Conic')}}function wt(e){var a=Math.sin,t=Math.abs,s=e.x,n=e.y;t(2*t(n)-Math.PI)<=_&&(n=ae(n)*(l-2*_));var o,r,i=t(t(n)-l);if(i>_)o=se(this.e,n,a(n)),r=this.a*this.f0*Math.pow(o,this.ns);else{if(i=n*this.ns,0>=i)return null;r=0}var m=this.ns*te(s-this.long0);return e.x=this.k0*(r*a(m))+this.x0,e.y=this.k0*(this.rh-r*Math.cos(m))+this.y0,e}function Ot(e){var a,t,s,n,o,r=Math.sqrt,i=(e.x-this.x0)/this.k0,m=this.rh-(e.y-this.y0)/this.k0;0<this.ns?(a=r(i*i+m*m),t=1):(a=-r(i*i+m*m),t=-1);var d=0;if(0!==a&&(d=Math.atan2(t*i,t*m)),!(0!==a||0<this.ns))n=-l;else if(t=1/this.ns,s=Math.pow(a/(this.a*this.f0),t),n=ne(this.e,s),-9999===n)return null;return o=te(d/this.ns+this.long0),e.x=o,e.y=n,e}var Rt=['Lambert Tangential Conformal Conic Projection','Lambert_Conformal_Conic','Lambert_Conformal_Conic_2SP','lcc'],kt={init:Pt,forward:wt,inverse:Ot,names:Rt};function It(){var e=Math.sin,a=Math.tan,t=Math.pow,s=Math.sqrt;this.a=6377397.155,this.es=0.006674372230614,this.e=s(this.es),this.lat0||(this.lat0=0.863937979737193),this.long0||(this.long0=0.7417649320975901-0.308341501185665),this.k0||(this.k0=0.9999),this.s45=0.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=s(this.e2),this.alfa=s(1+this.e2*t(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(e(this.fi0)/this.alfa),this.g=t((1+this.e*e(this.fi0))/(1-this.e*e(this.fi0)),this.alfa*this.e/2),this.k=a(this.u0/2+this.s45)/t(a(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*s(1-this.e2)/(1-this.e2*t(e(this.fi0),2)),this.s0=1.37008346281555,this.n=e(this.s0),this.ro0=this.k1*this.n0/a(this.s0),this.ad=this.s90-this.uq}function vt(e){var a,t,n,o,s,r,l,i=Math.asin,m=Math.cos,d=Math.sin,p=Math.tan,_=Math.pow,c=e.x,y=e.y,u=te(c-this.long0);return a=_((1+this.e*d(y))/(1-this.e*d(y)),this.alfa*this.e/2),t=2*(Math.atan(this.k*_(p(y/2+this.s45),this.alfa)/a)-this.s45),n=-u*this.alfa,o=i(m(this.ad)*d(t)+d(this.ad)*m(t)*m(n)),s=i(m(t)*d(n)/m(o)),r=this.n*s,l=this.ro0*_(p(this.s0/2+this.s45),this.n)/_(p(o/2+this.s45),this.n),e.y=l*m(r)/1,e.x=l*d(r)/1,this.czech||(e.y*=-1,e.x*=-1),e}function Gt(e){var a,t,n,s,o,r,l,i,m=Math.asin,d=Math.cos,p=Math.sin,_=Math.atan,c=Math.tan,y=Math.pow,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),r=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.atan2(e.y,e.x),s=o/p(this.s0),n=2*(_(y(this.ro0/r,1/this.n)*c(this.s0/2+this.s45))-this.s45),a=m(d(this.ad)*p(n)-p(this.ad)*d(n)*d(s)),t=m(d(n)*p(s)/d(a)),e.x=this.long0-t/this.alfa,l=a,i=0;var x=0;do e.y=2*(_(y(this.k,-1/this.alfa)*y(c(a/2+this.s45),1/this.alfa)*y((1+this.e*p(l))/(1-this.e*p(l)),this.e/2))-this.s45),1e-10>Math.abs(l-e.y)&&(i=1),l=e.y,x+=1;while(0===i&&15>x);return 15<=x?null:e}var qt=['Krovak','krovak'],Tt={init:It,forward:vt,inverse:Gt,names:qt},jt=function(e,a,t,s,n){var o=Math.sin;return e*n-a*o(2*n)+t*o(4*n)-s*o(6*n)},Lt=function(e){return 1-0.25*e*(1+e/16*(3+1.25*e))},zt=function(e){return 0.375*e*(1+0.25*e*(1+0.46875*e))},Bt=function(e){return 0.05859375*e*e*(1+0.75*e)},Dt=function(e){return e*e*e*(35/3072)},Mt=function(t,a,e){var s=a*e;return t/Math.sqrt(1-s*s)},Ut=function(e){return Math.abs(e)<l?e:e-ae(e)*Math.PI},Qt=function(e,a,t,s,n){var o,r,l=Math.cos,m=Math.sin;o=e/a;for(var d=0;15>d;d++)if(r=(e-(a*o-t*m(2*o)+s*m(4*o)-n*m(6*o)))/(a-2*t*l(2*o)+4*s*l(4*o)-6*n*l(6*o)),o+=r,1e-10>=Math.abs(r))return o;return NaN};function Wt(){this.sphere||(this.e0=Lt(this.es),this.e1=zt(this.es),this.e2=Bt(this.es),this.e3=Dt(this.es),this.ml0=this.a*jt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Ft(e){var a,t,s=Math.cos,n=Math.sin,o=Math.tan,r=e.x,l=e.y;if(r=te(r-this.long0),this.sphere)a=this.a*Math.asin(s(l)*n(r)),t=this.a*(Math.atan2(o(l),s(r))-this.lat0);else{var i=n(l),m=s(l),d=Mt(this.a,this.e,i),p=o(l)*o(l),_=r*s(l),c=_*_,y=this.es*m*m/(1-this.es),u=this.a*jt(this.e0,this.e1,this.e2,this.e3,l);a=d*_*(1-c*p*(1/6-(8-p+8*y)*c/120)),t=u-this.ml0+d*i/m*c*(0.5+(5-p+6*y)*c/24)}return e.x=a+this.x0,e.y=t+this.y0,e}function Ht(e){var a=Math.cos,t=Math.sin,s=Math.tan,n=Math.abs;e.x-=this.x0,e.y-=this.y0;var o,r,i=e.x/this.a,m=e.y/this.a;if(this.sphere){var d=m+this.lat0;o=Math.asin(t(d)*a(i)),r=Math.atan2(s(i),a(d))}else{var p=this.ml0/this.a+m,c=Qt(p,this.e0,this.e1,this.e2,this.e3);if(n(n(c)-l)<=_)return e.x=this.long0,e.y=l,0>m&&(e.y*=-1),e;var y=Mt(this.a,this.e,t(c)),u=y*y*y/this.a/this.a*(1-this.es),x=Math.pow(s(c),2),g=i*this.a/y,f=g*g;o=c-y*s(c)/u*g*g*(0.5-(1+3*x)*g*g/24),r=g*(1-f*(x/3+(1+3*x)*x*f/15))/a(c)}return e.x=te(r+this.long0),e.y=Ut(o),e}var Kt=['Cassini','Cassini_Soldner','cass'],Xt={init:Wt,forward:Ft,inverse:Ht,names:Kt},Jt=function(e,a){var t;return 1e-7<e?(t=e*a,(1-e*e)*(a/(1-t*t)-0.5/e*Math.log((1-t)/(1+t)))):2*a},Vt=1,Zt=2,Yt=3,$t=4;function es(){var e=Math.cos,a=Math.sin,s=Math.abs,n=Math.sqrt,o=s(this.lat0);if(this.mode=s(o-l)<_?0>this.lat0?this.S_POLE:this.N_POLE:s(o)<_?this.EQUIT:this.OBLIQ,0<this.es){var t;switch(this.qp=Jt(this.e,1),this.mmf=0.5/(1-this.es),this.apa=ms(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=n(0.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=0.5*this.qp;break;case this.OBLIQ:this.rq=n(0.5*this.qp),t=a(this.lat0),this.sinb1=Jt(this.e,t)/this.qp,this.cosb1=n(1-this.sinb1*this.sinb1),this.dd=e(this.lat0)/(n(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;}}else this.mode===this.OBLIQ&&(this.sinph0=a(this.lat0),this.cosph0=e(this.lat0))}function as(e){var a,t,s,n,o,r,i,m,d,p,c=Math.cos,y=Math.sin,x=Math.abs,g=Math.sqrt,f=e.x,h=e.y;if(f=te(f-this.long0),!this.sphere){switch(i=0,m=0,d=0,s=c(f),n=y(f),o=y(h),r=Jt(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(i=r/this.qp,m=g(1-i*i)),this.mode){case this.OBLIQ:d=1+this.sinb1*i+this.cosb1*m*s;break;case this.EQUIT:d=1+m*s;break;case this.N_POLE:d=l+h,r=this.qp-r;break;case this.S_POLE:d=h-l,r=this.qp+r;}if(x(d)<_)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=g(2/d),t=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*i-this.sinb1*m*s):(d=g(2/(1+m*s)))*i*this.ymf,a=this.xmf*d*m*n;break;case this.N_POLE:case this.S_POLE:0<=r?(a=(d=g(r))*n,t=s*(this.mode===this.S_POLE?d:-d)):a=t=0;}}else if(o=y(h),p=c(h),s=c(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+p*s:1+this.sinph0*o+this.cosph0*p*s,t<=_)return null;t=g(2/t),a=t*p*y(f),t*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*p*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),x(h+this.phi0)<_)return null;t=u-0.5*h,t=2*(this.mode===this.S_POLE?c(t):y(t)),a=t*y(f),t*=s}return e.x=this.a*a+this.x0,e.y=this.a*t+this.y0,e}function ts(e){var a=Math.asin,t=Math.atan2,s=Math.cos,n=Math.sin,o=Math.abs,r=Math.sqrt;e.x-=this.x0,e.y-=this.y0;var i,m,d,p,c,u,g,f=e.x/this.a,x=e.y/this.a;if(this.sphere){var h,b=0,C=0;if(h=r(f*f+x*x),m=0.5*h,1<m)return null;switch(m=2*a(m),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(C=n(m),b=s(m)),this.mode){case this.EQUIT:m=o(h)<=_?0:a(x*C/h),f*=C,x=b*h;break;case this.OBLIQ:m=o(h)<=_?this.phi0:a(b*this.sinph0+x*C*this.cosph0/h),f*=C*this.cosph0,x=(b-n(m)*this.sinph0)*h;break;case this.N_POLE:x=-x,m=l-m;break;case this.S_POLE:m-=l;}i=0==x&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:t(f,x)}else{if(g=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,x*=this.dd,u=r(f*f+x*x),u<_)return e.x=0,e.y=this.phi0,e;p=2*a(0.5*u/this.rq),d=s(p),f*=p=n(p),this.mode===this.OBLIQ?(g=d*this.sinb1+x*p*this.cosb1/u,c=this.qp*g,x=u*this.cosb1*d-x*this.sinb1*p):(g=x*p/u,c=this.qp*g,x=u*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(x=-x),c=f*f+x*x,!c)return e.x=0,e.y=this.phi0,e;g=1-c/this.qp,this.mode===this.S_POLE&&(g=-g)}i=t(f,x),m=ds(a(g),this.apa)}return e.x=te(this.long0+i),e.y=m,e}var ss=0.3333333333333333,ns=0.17222222222222222,os=0.10257936507936508,rs=0.06388888888888888,ls=0.0664021164021164,is=0.016415012942191543;function ms(e){var a,t=[];return t[0]=e*ss,a=e*e,t[0]+=a*ns,t[1]=a*rs,a*=e,t[0]+=a*os,t[1]+=a*ls,t[2]=a*is,t}function ds(e,a){var s=Math.sin,n=e+e;return e+a[0]*s(n)+a[1]*s(n+n)+a[2]*s(n+n+n)}var ps=['Lambert Azimuthal Equal Area','Lambert_Azimuthal_Equal_Area','laea'],_s={init:es,forward:as,inverse:ts,names:ps,S_POLE:Vt,N_POLE:Zt,EQUIT:Yt,OBLIQ:$t},cs=function(e){return 1<Math.abs(e)&&(e=1<e?1:-1),Math.asin(e)};function ys(){var e=Math.cos,a=Math.sin,t=Math.abs,s=Math.sqrt;t(this.lat1+this.lat2)<_||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=s(this.es),this.sin_po=a(this.lat1),this.cos_po=e(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ee(this.e3,this.sin_po,this.cos_po),this.qs1=Jt(this.e3,this.sin_po,this.cos_po),this.sin_po=a(this.lat2),this.cos_po=e(this.lat2),this.t2=this.sin_po,this.ms2=ee(this.e3,this.sin_po,this.cos_po),this.qs2=Jt(this.e3,this.sin_po,this.cos_po),this.sin_po=a(this.lat0),this.cos_po=e(this.lat0),this.t3=this.sin_po,this.qs0=Jt(this.e3,this.sin_po,this.cos_po),this.ns0=t(this.lat1-this.lat2)>_?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*s(this.c-this.ns0*this.qs0)/this.ns0)}function us(e){var a=Math.cos,t=Math.sin,s=e.x,n=e.y;this.sin_phi=t(n),this.cos_phi=a(n);var o=Jt(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*o)/this.ns0,l=this.ns0*te(s-this.long0),i=r*t(l)+this.x0,m=this.rh-r*a(l)+this.y0;return e.x=i,e.y=m,e}function xs(e){var a,t,s,n,o,r,l=Math.sqrt;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,0<=this.ns0?(a=l(e.x*e.x+e.y*e.y),s=1):(a=-l(e.x*e.x+e.y*e.y),s=-1),n=0,0!==a&&(n=Math.atan2(s*e.x,s*e.y)),s=a*this.ns0/this.a,this.sphere?r=Math.asin((this.c-s*s)/(2*this.ns0)):(t=(this.c-s*s)/this.ns0,r=this.phi1z(this.e3,t)),o=te(n/this.ns0+this.long0),e.x=o,e.y=r,e}function gs(e,a){var t,s,n,o,r,l=cs(0.5*a);if(e<_)return l;for(var m=1;25>=m;m++)if(t=Math.sin(l),s=Math.cos(l),n=e*t,o=1-n*n,r=0.5*o*o/s*(a/(1-e*e)-t/o+0.5/e*Math.log((1-n)/(1+n))),l+=r,1e-7>=Math.abs(r))return l;return null}var fs=['Albers_Conic_Equal_Area','Albers','aea'],hs={init:ys,forward:us,inverse:xs,names:fs,phi1z:gs};function bs(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Cs(e){var a,t,s,n,o,r,l,i,m=Math.cos,d=Math.sin,p=e.x,c=e.y;return s=te(p-this.long0),a=d(c),t=m(c),n=m(s),r=this.sin_p14*a+this.cos_p14*t*n,o=1,0<r||Math.abs(r)<=_?(l=this.x0+this.a*o*t*d(s)/r,i=this.y0+this.a*o*(this.cos_p14*a-this.sin_p14*t*n)/r):(l=this.x0+this.infinity_dist*t*d(s),i=this.y0+this.infinity_dist*(this.cos_p14*a-this.sin_p14*t*n)),e.x=l,e.y=i,e}function As(e){var a,t,s,n,o,r,l=Math.atan2;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(a=Math.sqrt(e.x*e.x+e.y*e.y))?(n=l(a,this.rc),t=Math.sin(n),s=Math.cos(n),r=cs(s*this.sin_p14+e.y*t*this.cos_p14/a),o=l(e.x*t,a*this.cos_p14*s-e.y*this.sin_p14*t),o=te(this.long0+o)):(r=this.phic0,o=0),e.x=o,e.y=r,e}var Es=['gnom'],Ss={init:bs,forward:Cs,inverse:As,names:Es},Ns=function(e,a){var t=Math.log,s=Math.abs,n=1-(1-e*e)/(2*e)*t((1-e)/(1+e));if(1e-6>s(s(a)-n))return 0>a?-1*l:l;for(var o,r,m,d,p=Math.asin(0.5*a),_=0;30>_;_++)if(r=Math.sin(p),m=Math.cos(p),d=e*r,o=Math.pow(1-d*d,2)/(2*m)*(a/(1-e*e)-r/(1-d*d)+0.5/e*t((1-d)/(1+d))),p+=o,1e-10>=s(o))return p;return NaN};function Ps(){this.sphere||(this.k0=ee(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function ws(e){var a,t,s=Math.cos,n=Math.sin,o=e.x,r=e.y,l=te(o-this.long0);if(this.sphere)a=this.x0+this.a*l*s(this.lat_ts),t=this.y0+this.a*n(r)/s(this.lat_ts);else{var i=Jt(this.e,n(r));a=this.x0+this.a*this.k0*l,t=this.y0+0.5*(this.a*i)/this.k0}return e.x=a,e.y=t,e}function Os(e){var a=Math.cos;e.x-=this.x0,e.y-=this.y0;var t,s;return this.sphere?(t=te(this.long0+e.x/this.a/a(this.lat_ts)),s=Math.asin(e.y/this.a*a(this.lat_ts))):(s=Ns(this.e,2*e.y*this.k0/this.a),t=te(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=s,e}var Rs=['cea'],ks={init:Ps,forward:ws,inverse:Os,names:Rs};function Is(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||'Equidistant Cylindrical (Plate Carre)',this.rc=Math.cos(this.lat_ts)}function vs(e){var a=e.x,t=e.y,s=te(a-this.long0),n=Ut(t-this.lat0);return e.x=this.x0+this.a*s*this.rc,e.y=this.y0+this.a*n,e}function Gs(e){var a=e.x,t=e.y;return e.x=te(this.long0+(a-this.x0)/(this.a*this.rc)),e.y=Ut(this.lat0+(t-this.y0)/this.a),e}var qs=['Equirectangular','Equidistant_Cylindrical','eqc'],Ts={init:Is,forward:vs,inverse:Gs,names:qs},js=20;function Ls(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Lt(this.es),this.e1=zt(this.es),this.e2=Bt(this.es),this.e3=Dt(this.es),this.ml0=this.a*jt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function zs(e){var a,t,s,n=Math.cos,o=Math.sin,r=Math.tan,l=Math.abs,i=e.x,m=e.y,d=te(i-this.long0);if(s=d*o(m),this.sphere)l(m)<=_?(a=this.a*d,t=-1*this.a*this.lat0):(a=this.a*o(s)/r(m),t=this.a*(Ut(m-this.lat0)+(1-n(s))/r(m)));else if(l(m)<=_)a=this.a*d,t=-1*this.ml0;else{var p=Mt(this.a,this.e,o(m))/r(m);a=p*o(s),t=this.a*jt(this.e0,this.e1,this.e2,this.e3,m)-this.ml0+p*(1-n(s))}return e.x=a+this.x0,e.y=t+this.y0,e}function Bs(e){var a,t,s,n,o,r,l,i,m,d=Math.asin,p=Math.cos,c=Math.sin,y=Math.tan,u=Math.abs,x=Math.sqrt;if(s=e.x-this.x0,n=e.y-this.y0,this.sphere){if(u(n+this.a*this.lat0)<=_)a=te(s/this.a+this.long0),t=0;else{r=this.lat0+n/this.a,l=s*s/this.a/this.a+r*r,i=r;var g;for(o=js;o;--o)if(g=y(i),m=-1*(r*(i*g+1)-i-0.5*(i*i+l)*g)/((i-r)/g-1),i+=m,u(m)<=_){t=i;break}a=te(this.long0+d(s*y(i)/this.a)/c(t))}}else if(u(n+this.ml0)<=_)t=0,a=te(this.long0+s/this.a);else{r=(this.ml0+n)/this.a,l=s*s/this.a/this.a+r*r,i=r;var f,h,b,C,A;for(o=js;o;--o)if(A=this.e*c(i),f=x(1-A*A)*y(i),h=this.a*jt(this.e0,this.e1,this.e2,this.e3,i),b=this.e0-2*this.e1*p(2*i)+4*this.e2*p(4*i)-6*this.e3*p(6*i),C=h/this.a,m=(r*(f*C+1)-C-0.5*f*(C*C+l))/(this.es*c(2*i)*(C*C+l-2*r*C)/(4*f)+(r-C)*(f*b-2/c(2*i))-b),i-=m,u(m)<=_){t=i;break}f=x(1-this.es*Math.pow(c(t),2))*y(t),a=te(this.long0+d(s*f/this.a)/c(t))}return e.x=a,e.y=t,e}var Ds=['Polyconic','poly'],Ms={init:Ls,forward:zs,inverse:Bs,names:Ds};function Us(){this.A=[],this.A[1]=0.6399175073,this.A[2]=-0.1358797613,this.A[3]=0.063294409,this.A[4]=-0.02526853,this.A[5]=0.0117879,this.A[6]=-0.0055161,this.A[7]=0.0026906,this.A[8]=-0.001333,this.A[9]=6.7e-4,this.A[10]=-3.4e-4,this.B_re=[],this.B_im=[],this.B_re[1]=0.7557853228,this.B_im[1]=0,this.B_re[2]=0.249204646,this.B_im[2]=0.003371507,this.B_re[3]=-0.001541739,this.B_im[3]=0.04105856,this.B_re[4]=-0.10162907,this.B_im[4]=0.01727609,this.B_re[5]=-0.26623489,this.B_im[5]=-0.36249218,this.B_re[6]=-0.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-0.577245789,this.C_im[2]=-0.007809598,this.C_re[3]=0.508307513,this.C_im[3]=-0.112208952,this.C_re[4]=-0.15094762,this.C_im[4]=0.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=0.5185406398,this.D[3]=-0.03333098,this.D[4]=-0.1052906,this.D[5]=-0.0368594,this.D[6]=0.007317,this.D[7]=0.0122,this.D[8]=0.00394,this.D[9]=-0.0013}function Qs(e){var a,t=e.x,s=e.y,n=s-this.lat0,o=t-this.long0,l=1,i=0;for(a=1;10>=a;a++)l*=1E-5*(n/r),i+=this.A[a]*l;var m,d,p=i,_=o,c=1,y=0,u=0,x=0;for(a=1;6>=a;a++)m=c*p-y*_,d=y*p+c*_,c=m,y=d,u=u+this.B_re[a]*c-this.B_im[a]*y,x=x+this.B_im[a]*c+this.B_re[a]*y;return e.x=x*this.a+this.x0,e.y=u*this.a+this.y0,e}function Ws(e){var a,t,s,n=e.x,o=e.y,l=n-this.x0,m=o-this.y0,d=m/this.a,p=l/this.a,_=1,c=0,y=0,u=0;for(a=1;6>=a;a++)t=_*d-c*p,s=c*d+_*p,_=t,c=s,y=y+this.C_re[a]*_-this.C_im[a]*c,u=u+this.C_im[a]*_+this.C_re[a]*c;for(var x=0;x<this.iterations;x++){var i,g,f=y,h=u,b=d,C=p;for(a=2;6>=a;a++)i=f*y-h*u,g=h*y+f*u,f=i,h=g,b+=(a-1)*(this.B_re[a]*f-this.B_im[a]*h),C+=(a-1)*(this.B_im[a]*f+this.B_re[a]*h);f=1,h=0;var A=this.B_re[1],E=this.B_im[1];for(a=2;6>=a;a++)i=f*y-h*u,g=h*y+f*u,f=i,h=g,A+=a*(this.B_re[a]*f-this.B_im[a]*h),E+=a*(this.B_im[a]*f+this.B_re[a]*h);var S=A*A+E*E;y=(b*A+C*E)/S,u=(C*A-b*E)/S}var N=y,P=u,w=1,O=0;for(a=1;9>=a;a++)w*=N,O+=this.D[a]*w;var R=this.lat0+1E5*(O*r),k=this.long0+P;return e.x=k,e.y=R,e}var Fs=['New_Zealand_Map_Grid','nzmg'],Hs={init:Us,forward:Qs,inverse:Ws,names:Fs};function Ks(){}function Xs(e){var a=e.x,t=e.y,s=te(a-this.long0),n=this.x0+this.a*s,o=this.y0+1.25*(this.a*Math.log(Math.tan(Math.PI/4+t/2.5)));return e.x=n,e.y=o,e}function Js(e){e.x-=this.x0,e.y-=this.y0;var a=te(this.long0+e.x/this.a),t=2.5*(Math.atan(Math.exp(0.8*e.y/this.a))-Math.PI/4);return e.x=a,e.y=t,e}var Vs=['Miller_Cylindrical','mill'],Zs={init:Ks,forward:Xs,inverse:Js,names:Vs},Ys=20;function $s(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Na(this.es)}function en(e){var a,t,n=Math.cos,o=Math.sin,r=e.x,l=e.y;if(r=te(r-this.long0),this.sphere){if(!this.m)l=1===this.n?l:Math.asin(this.n*o(l));else for(var m,d=this.n*o(l),p=Ys;p&&(m=(this.m*l+o(l)-d)/(this.m+n(l)),l-=m,!(Math.abs(m)<_));--p);a=this.a*this.C_x*r*(this.m+n(l)),t=this.a*this.C_y*l}else{var i=o(l),s=n(l);t=this.a*Pa(l,i,s,this.en),a=this.a*r*s/Math.sqrt(1-this.es*i*i)}return e.x=a,e.y=t,e}function an(e){var a,t,n,o,s=Math.cos,r=Math.sin;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,a=e.y/this.a,this.sphere?(a/=this.C_y,n/=this.C_x*(this.m+s(a)),this.m?a=cs((this.m*a+r(a))/this.n):1!==this.n&&(a=cs(r(a)/this.n)),n=te(n+this.long0),a=Ut(a)):(a=Oa(e.y/this.a,this.es,this.en),o=Math.abs(a),o<l?(o=r(a),t=this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*s(a)),n=te(t)):o-_<l&&(n=this.long0)),e.x=n,e.y=a,e}var tn=['Sinusoidal','sinu'],sn={init:$s,forward:en,inverse:an,names:tn};function nn(){}function on(e){for(var a,t=Math.PI,s=Math.cos,n=Math.sin,o=Math.abs,r=e.x,l=e.y,m=te(r-this.long0),d=l,p=t*n(l),c=0;a=-(d+n(d)-p)/(1+s(d)),d+=a,!(o(a)<_);c++);d/=2,t/2-o(l)<_&&(m=0);var i=0.900316316158*this.a*m*s(d)+this.x0,u=1.4142135623731*this.a*n(d)+this.y0;return e.x=i,e.y=u,e}function rn(e){var a,t,s=Math.asin,n=Math.PI,o=Math.abs;e.x-=this.x0,e.y-=this.y0,t=e.y/(1.4142135623731*this.a),0.999999999999<o(t)&&(t=0.999999999999),a=s(t);var r=te(this.long0+e.x/(0.900316316158*this.a*Math.cos(a)));r<-n&&(r=-n),r>n&&(r=n),t=(2*a+Math.sin(2*a))/n,1<o(t)&&(t=1);var l=s(t);return e.x=r,e.y=l,e}var ln=['Mollweide','moll'],mn={init:nn,forward:on,inverse:rn,names:ln};function dn(){var e=Math.cos,a=Math.sin,t=Math.abs;t(this.lat1+this.lat2)<_||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Lt(this.es),this.e1=zt(this.es),this.e2=Bt(this.es),this.e3=Dt(this.es),this.sinphi=a(this.lat1),this.cosphi=e(this.lat1),this.ms1=ee(this.e,this.sinphi,this.cosphi),this.ml1=jt(this.e0,this.e1,this.e2,this.e3,this.lat1),t(this.lat1-this.lat2)<_?this.ns=this.sinphi:(this.sinphi=a(this.lat2),this.cosphi=e(this.lat2),this.ms2=ee(this.e,this.sinphi,this.cosphi),this.ml2=jt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=jt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function pn(e){var a,t=e.x,s=e.y;if(this.sphere)a=this.a*(this.g-s);else{var n=jt(this.e0,this.e1,this.e2,this.e3,s);a=this.a*(this.g-n)}var o=this.ns*te(t-this.long0),r=this.x0+a*Math.sin(o),l=this.y0+this.rh-a*Math.cos(o);return e.x=r,e.y=l,e}function _n(e){var a=Math.sqrt;e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,s,n,o;0<=this.ns?(s=a(e.x*e.x+e.y*e.y),t=1):(s=-a(e.x*e.x+e.y*e.y),t=-1);var r=0;if(0!==s&&(r=Math.atan2(t*e.x,t*e.y)),this.sphere)return o=te(this.long0+r/this.ns),n=Ut(this.g-s/this.a),e.x=o,e.y=n,e;var l=this.g-s/this.a;return n=Qt(l,this.e0,this.e1,this.e2,this.e3),o=te(this.long0+r/this.ns),e.x=o,e.y=n,e}var cn=['Equidistant_Conic','eqdc'],yn={init:dn,forward:pn,inverse:_n,names:cn};function un(){this.R=this.a}function xn(e){var a,t,s=Math.PI,n=Math.tan,o=Math.abs,r=Math.sqrt,i=e.x,d=e.y,p=te(i-this.long0);o(d)<=_&&(a=this.x0+this.R*p,t=this.y0);var c=cs(2*o(d/s));(o(p)<=_||o(o(d)-l)<=_)&&(a=this.x0,t=0<=d?this.y0+s*this.R*n(0.5*c):this.y0+s*this.R*-n(0.5*c));var y=0.5*o(s/p-p/s),u=y*y,x=Math.sin(c),f=Math.cos(c),h=f/(x+f-1),g=h*(2/x-1),m=g*g,b=s*this.R*(y*(h-m)+r(u*(h-m)*(h-m)-(m+u)*(h*h-m)))/(m+u);0>p&&(b=-b),a=this.x0+b;var C=u+h;return b=s*this.R*(g*C-y*r((m+u)*(u+1)-C*C))/(m+u),t=0<=d?this.y0+b:this.y0-b,e.x=a,e.y=t,e}function gn(e){var a,t,s,n,o,r,l,i,m,p,c,y,u,d=Math.PI,x=Math.cos,g=Math.abs,f=Math.sqrt;return e.x-=this.x0,e.y-=this.y0,c=d*this.R,s=e.x/c,n=e.y/c,o=s*s+n*n,r=-g(n)*(1+o),l=r-2*n*n+s*s,i=-2*r+1+2*n*n+o*o,u=n*n/i+(2*l*l*l/i/i/i-9*r*l/i/i)/27,m=(r-l*l/3/i)/i,p=2*f(-m/3),c=3*u/m/p,1<g(c)&&(0<=c?c=1:c=-1),y=Math.acos(c)/3,t=0<=e.y?(-p*x(y+d/3)-l/3/i)*d:-(-p*x(y+d/3)-l/3/i)*d,a=g(s)<_?this.long0:te(this.long0+d*(o-1+f(1+2*(s*s-n*n)+o*o))/2/s),e.x=a,e.y=t,e}var fn=['Van_der_Grinten_I','VanDerGrinten','vandg'],hn={init:un,forward:xn,inverse:gn,names:fn};function bn(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function Cn(e){var a,t,n,o,r,i,m,d,p,y,u,x,g,f,h,b,c,C,A,s,E,S,N,P=Math.asin,w=Math.cos,O=Math.sin,R=Math.abs,k=Math.sqrt,I=e.x,v=e.y,G=O(e.y),q=w(e.y),T=te(I-this.long0);return this.sphere?R(this.sin_p12-1)<=_?(e.x=this.x0+this.a*(l-v)*O(T),e.y=this.y0-this.a*(l-v)*w(T),e):R(this.sin_p12+1)<=_?(e.x=this.x0+this.a*(l+v)*O(T),e.y=this.y0+this.a*(l+v)*w(T),e):(C=this.sin_p12*G+this.cos_p12*q*w(T),b=Math.acos(C),c=b/O(b),e.x=this.x0+this.a*c*q*O(T),e.y=this.y0+this.a*c*(this.cos_p12*G-this.sin_p12*q*w(T)),e):(a=Lt(this.es),t=zt(this.es),n=Bt(this.es),o=Dt(this.es),R(this.sin_p12-1)<=_?(r=this.a*jt(a,t,n,o,l),i=this.a*jt(a,t,n,o,v),e.x=this.x0+(r-i)*O(T),e.y=this.y0-(r-i)*w(T),e):R(this.sin_p12+1)<=_?(r=this.a*jt(a,t,n,o,l),i=this.a*jt(a,t,n,o,v),e.x=this.x0+(r+i)*O(T),e.y=this.y0+(r+i)*w(T),e):(m=G/q,d=Mt(this.a,this.e,this.sin_p12),p=Mt(this.a,this.e,G),y=Math.atan((1-this.es)*m+this.es*d*this.sin_p12/(p*q)),u=Math.atan2(O(T),this.cos_p12*Math.tan(y)-this.sin_p12*w(T)),A=0===u?P(this.cos_p12*O(y)-this.sin_p12*w(y)):R(R(u)-Math.PI)<=_?-P(this.cos_p12*O(y)-this.sin_p12*w(y)):P(O(T)*w(y)/O(u)),x=this.e*this.sin_p12/k(1-this.es),g=this.e*this.cos_p12*w(u)/k(1-this.es),f=x*g,h=g*g,s=A*A,E=s*A,S=E*A,N=S*A,b=d*A*(1-s*h*(1-h)/6+E/8*f*(1-2*h)+S/120*(h*(4-7*h)-3*x*x*(1-7*h))-N/48*f),e.x=this.x0+b*O(u),e.y=this.y0+b*w(u),e))}function An(e){var a=Math.asin,t=Math.atan2,s=Math.cos,n=Math.sin,o=Math.pow,r=Math.abs,i=Math.sqrt;e.x-=this.x0,e.y-=this.y0;var m,d,p,c,y,u,x,g,f,h,b,C,E,S,N,P,w,O,R,A,k,I,v;return this.sphere?(m=i(e.x*e.x+e.y*e.y),m>2*l*this.a)?void 0:(d=m/this.a,p=n(d),c=s(d),y=this.long0,r(m)<=_?u=this.lat0:(u=cs(c*this.sin_p12+e.y*p*this.cos_p12/m),x=r(this.lat0)-l,y=r(x)<=_?0<=this.lat0?te(this.long0+t(e.x,-e.y)):te(this.long0-t(-e.x,e.y)):te(this.long0+t(e.x*p,m*this.cos_p12*c-e.y*this.sin_p12*p))),e.x=y,e.y=u,e):(g=Lt(this.es),f=zt(this.es),h=Bt(this.es),b=Dt(this.es),r(this.sin_p12-1)<=_?(C=this.a*jt(g,f,h,b,l),m=i(e.x*e.x+e.y*e.y),E=C-m,u=Qt(E/this.a,g,f,h,b),y=te(this.long0+t(e.x,-1*e.y)),e.x=y,e.y=u,e):r(this.sin_p12+1)<=_?(C=this.a*jt(g,f,h,b,l),m=i(e.x*e.x+e.y*e.y),E=m-C,u=Qt(E/this.a,g,f,h,b),y=te(this.long0+t(e.x,e.y)),e.x=y,e.y=u,e):(m=i(e.x*e.x+e.y*e.y),P=t(e.x,e.y),S=Mt(this.a,this.e,this.sin_p12),w=s(P),O=this.e*this.cos_p12*w,R=-O*O/(1-this.es),A=3*this.es*(1-R)*this.sin_p12*this.cos_p12*w/(1-this.es),k=m/S,I=k-R*(1+R)*o(k,3)/6-A*(1+3*R)*o(k,4)/24,v=1-R*I*I/2-k*I*I*I/6,N=a(this.sin_p12*s(I)+this.cos_p12*n(I)*w),y=te(this.long0+a(n(P)*n(I)/s(N))),u=Math.atan((1-this.es*v*this.sin_p12/n(N))*Math.tan(N)/(1-this.es)),e.x=y,e.y=u,e))}var En=['Azimuthal_Equidistant','aeqd'],Sn={init:bn,forward:Cn,inverse:An,names:En};function Nn(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Pn(e){var a,t,s,n,o,r,l,i,m=Math.cos,d=Math.sin,p=e.x,c=e.y;return s=te(p-this.long0),a=d(c),t=m(c),n=m(s),r=this.sin_p14*a+this.cos_p14*t*n,o=1,(0<r||Math.abs(r)<=_)&&(l=this.a*o*t*d(s),i=this.y0+this.a*o*(this.cos_p14*a-this.sin_p14*t*n)),e.x=l,e.y=i,e}function wn(e){var a,t,s,n,o,r,i,m=Math.atan2,d=Math.abs;return(e.x-=this.x0,e.y-=this.y0,a=Math.sqrt(e.x*e.x+e.y*e.y),t=cs(a/this.a),s=Math.sin(t),n=Math.cos(t),r=this.long0,d(a)<=_)?(i=this.lat0,e.x=r,e.y=i,e):(i=cs(n*this.sin_p14+e.y*s*this.cos_p14/a),o=d(this.lat0)-l,d(o)<=_)?(r=0<=this.lat0?te(this.long0+m(e.x,-e.y)):te(this.long0-m(-e.x,e.y)),e.x=r,e.y=i,e):(r=te(this.long0+m(e.x*s,a*this.cos_p14*n-e.y*this.sin_p14*s)),e.x=r,e.y=i,e)}var On=['ortho'],Rn={init:Nn,forward:Pn,inverse:wn,names:On},kn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},In={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function vn(){var e=Math.abs;this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||'Quadrilateralized Spherical Cube',this.face=this.lat0>=l-u/2?kn.TOP:this.lat0<=-(l-u/2)?kn.BOTTOM:e(this.long0)<=u?kn.FRONT:e(this.long0)<=l+u?0<this.long0?kn.RIGHT:kn.LEFT:kn.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Gn(e){var a,n,o,i,m,t,d=Math.acos,p=Math.cos,_=Math.sin,c=Math.atan,y={x:0,y:0},x={value:0};if(e.x-=this.long0,a=0===this.es?e.y:c(this.one_minus_f_squared*Math.tan(e.y)),n=e.x,this.face===kn.TOP)i=l-a,n>=u&&n<=l+u?(x.value=In.AREA_0,o=n-l):n>l+u||n<=-(l+u)?(x.value=In.AREA_1,o=0<n?n-g:n+g):n>-(l+u)&&n<=-u?(x.value=In.AREA_2,o=n+l):(x.value=In.AREA_3,o=n);else if(this.face===kn.BOTTOM)i=l+a,n>=u&&n<=l+u?(x.value=In.AREA_0,o=-n+l):n<u&&n>=-u?(x.value=In.AREA_1,o=-n):n<-u&&n>=-(l+u)?(x.value=In.AREA_2,o=-n-l):(x.value=In.AREA_3,o=0<n?-n+g:-n-g);else{var f,h,b,s,C,A,E;this.face===kn.RIGHT?n=jn(n,+l):this.face===kn.BACK?n=jn(n,+g):this.face===kn.LEFT&&(n=jn(n,-l)),s=_(a),C=p(a),A=_(n),E=p(n),f=C*E,h=C*A,b=s,this.face===kn.FRONT?(i=d(f),o=Tn(i,b,h,x)):this.face===kn.RIGHT?(i=d(h),o=Tn(i,b,-f,x)):this.face===kn.BACK?(i=d(-f),o=Tn(i,b,-h,x)):this.face===kn.LEFT?(i=d(-h),o=Tn(i,b,f,x)):(i=o=0,x.value=In.AREA_0)}return t=c(12/g*(o+d(_(o)*p(u))-l)),m=Math.sqrt((1-p(i))/(p(t)*p(t))/(1-p(c(1/p(o))))),x.value===In.AREA_1?t+=l:x.value===In.AREA_2?t+=g:x.value===In.AREA_3&&(t+=1.5*g),y.x=m*p(t),y.y=m*_(t),y.x=y.x*this.a+this.x0,y.y=y.y*this.a+this.y0,e.x=y.x,e.y=y.y,e}function qn(e){var a,n,o,i,m,d,p,_,c,y=Math.acos,u=Math.atan2,x=Math.cos,f=Math.sin,h=Math.atan,b=Math.tan,C=Math.abs,A=Math.sqrt,E={lam:0,phi:0},S={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=h(A(e.x*e.x+e.y*e.y)),a=u(e.y,e.x),0<=e.x&&e.x>=C(e.y)?S.value=In.AREA_0:0<=e.y&&e.y>=C(e.x)?(S.value=In.AREA_1,a-=l):0>e.x&&-e.x>=C(e.y)?(S.value=In.AREA_2,a=0>a?a+g:a-g):(S.value=In.AREA_3,a+=l),c=g/12*b(a),m=f(c)/(x(c)-1/1.4142135623730951),d=h(m),o=x(a),i=b(n),p=1-o*o*i*i*(1-x(h(1/x(d)))),-1>p?p=-1:1<p&&(p=1),this.face===kn.TOP)_=y(p),E.phi=l-_,E.lam=S.value===In.AREA_0?d+l:S.value===In.AREA_1?0>d?d+g:d-g:S.value===In.AREA_2?d-l:d;else if(this.face===kn.BOTTOM)_=y(p),E.phi=_-l,E.lam=S.value===In.AREA_0?-d+l:S.value===In.AREA_1?-d:S.value===In.AREA_2?-d-l:0>d?-d-g:-d+g;else{var N,P,w;N=p,c=N*N,w=1<=c?0:A(1-c)*f(d),c+=w*w,P=1<=c?0:A(1-c),S.value===In.AREA_1?(c=P,P=-w,w=c):S.value===In.AREA_2?(P=-P,w=-w):S.value===In.AREA_3&&(c=P,P=w,w=-c),this.face===kn.RIGHT?(c=N,N=-P,P=c):this.face===kn.BACK?(N=-N,P=-P):this.face===kn.LEFT&&(c=N,N=P,P=-c),E.phi=y(-w)-l,E.lam=u(P,N),this.face===kn.RIGHT?E.lam=jn(E.lam,-l):this.face===kn.BACK?E.lam=jn(E.lam,-g):this.face===kn.LEFT&&(E.lam=jn(E.lam,+l))}if(0!==this.es){var O,R,k;O=0>E.phi?1:0,R=b(E.phi),k=this.b/A(R*R+this.one_minus_f_squared),E.phi=h(A(this.a*this.a-k*k)/(this.one_minus_f*k)),O&&(E.phi=-E.phi)}return E.lam+=this.long0,e.x=E.lam,e.y=E.phi,e}function Tn(e,a,t,s){var n;return e<_?(s.value=In.AREA_0,n=0):(n=Math.atan2(a,t),Math.abs(n)<=u?s.value=In.AREA_0:n>u&&n<=l+u?(s.value=In.AREA_1,n-=l):n>l+u||n<=-(l+u)?(s.value=In.AREA_2,n=0<=n?n-g:n+g):(s.value=In.AREA_3,n+=l)),n}function jn(e,a){var t=e+a;return t<-g?t+=p:t>+g&&(t-=p),t}var Ln=['Quadrilateralized Spherical Cube','Quadrilateralized_Spherical_Cube','qsc'],zn={init:vn,forward:Gn,inverse:qn,names:Ln},Bn=function(e){e.Proj.projections.add(Ga),e.Proj.projections.add(Ha),e.Proj.projections.add(Za),e.Proj.projections.add(mt),e.Proj.projections.add(ut),e.Proj.projections.add(bt),e.Proj.projections.add(Nt),e.Proj.projections.add(kt),e.Proj.projections.add(Tt),e.Proj.projections.add(Xt),e.Proj.projections.add(_s),e.Proj.projections.add(hs),e.Proj.projections.add(Ss),e.Proj.projections.add(ks),e.Proj.projections.add(Ts),e.Proj.projections.add(Ms),e.Proj.projections.add(Hs),e.Proj.projections.add(Zs),e.Proj.projections.add(sn),e.Proj.projections.add(mn),e.Proj.projections.add(yn),e.Proj.projections.add(hn),e.Proj.projections.add(Sn),e.Proj.projections.add(Rn),e.Proj.projections.add(zn)};We.defaultDatum='WGS84',We.Proj=we,We.WGS84=new We.Proj('WGS84'),We.Point=pa,We.toPoint=je,We.defs=W,We.transform=De,We.mgrs=Z,We.version=_a,Bn(We);export default We;
